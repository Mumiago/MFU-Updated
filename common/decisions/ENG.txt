
ENG_africa_explanation = {
	ENG_africa_explanation_dec = {
		icon = generic_decision
		fire_only_once = no
		allowed = {
			original_tag = ENG
		}
		visible = {
			original_tag = ENG
		}
		complete_effect = {
			country_event = { id = britain.45 }
		}
	}
}
operations = {
	ENG_integrate_polska = {

		icon = generic_operation

		allowed = {
			tag = 	ENG
		}

		available = {
			POL = {
				AND = { 
					exists = yes 
					has_capitulated = yes
					is_ai = yes
				}
				
			}
			GER = {
				has_completed_focus = GER_polish_occupation
			}
		}

		fire_only_once = yes

		complete_effect = {

			annex_country = {
				target = POL
			}
			hidden_effect = {
				set_victory_points = {
					province = 13349
					value = 1
				}
				GER = {
					transfer_state = 10
					transfer_state = 90
					transfer_state = 88
					transfer_state = 92
				}
				if = {
					limit = {
						SLO = {
							exists = yes
						}
						GER = {
							controls_state = 811
						}

					}
					SLO = {
						transfer_state = 811
					}
				}
			}
			
		}
	}


	ENG_annex_Ireland = {
		
		icon = generic_operation

		fire_only_once = yes

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG = {
				NOT = {
					controls_state = 126
				}
			}
		}

		visible = {
			has_war = yes
		}

		complete_effect = {
			annex_country = { 
				target = IRE 
				transfer_troops = no
			} 
			113 = {
				set_building_level = {
					type = air_base
					level = 12
				}
			}
			134 = {
				set_building_level = {
					type = air_base
					level = 12
				}
			}
			135 = {
				
				set_building_level = {
					type = air_base
					level = 12
				}
			}
			119 = {
				
				set_building_level = {
					type = air_base
					level = 12
				}
			}
			division_template = {
				name = "Home Guard Ireland"
				is_locked = no
				priority = 0  
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
						
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }						

					infantry = { x = 3 y = 0 }	
					artillery_brigade = { x = 3 y = 1 }
					artillery_brigade = { x = 3 y = 2 }		
					artillery_brigade = { x = 3 y = 3 }

					anti_air = { x = 4 y = 0 }
					anti_tank_brigade = { x = 4 y = 1 }
				}

				support = {
					artillery = { x = 0 y = 0 }
					engineer = { x = 0 y = 1 }
					military_police = { x = 1 y = 0 }
					recon = { x = 1 y = 1 }
					anti_tank = { x = 1 y = 2 }
				}
			}	
			113 = {
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
			}
			135 = {
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
			}
			134 = {
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
				create_unit = {
					division = "name = \"Home Guard Ireland\" division_template = \"Home Guard Ireland\" start_experience_factor = 0.6 start_equipment_factor = 1 " 
					owner = ENG
				}
			}
		}	

		ai_will_do = {
			factor = 1
		}
	}
	ENG_ai_navy = {
		fire_only_once = yes
		icon = generic_operation
		allowed = {
			tag = ENG
		}
		available = {
			has_war_with = GER
		}
		ai_will_do = {
			factor = 0

			modifier = {
				add = 100
				IRE = { is_ai = yes }
			}
		}
		complete_effect = {
			IRE = {
				transfer_navy = {
					target = ENG
				}
			}
		}
	}
	ENG_saf_resources = {
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  ENG
		}

		visible = {
		}
		available = {
			SAF = {
				has_completed_focus = SAF_secure_interests_in_africa
			}	
		}
		ai_will_do = {
			factor = 0

			modifier = {
				add = 100
				SAF = { is_ai = yes }
			}
		}
		complete_effect = {
			SAF = { remove_resource_rights = 542 }
			SAF = { remove_resource_rights = 771 }
			SAF = { remove_resource_rights = 546 }
		}
	}
}
ENG_budget_decisions = {
	ENG_naval_war_games = {
		icon = generic_prepare_civil_war

		available = {
		}
		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 200
    			compare = greater_than_or_equals
			}
		}
		custom_cost_text = ENG_200_british_money 
		cost = 0 
		days_re_enable = 90
		ai_will_do = {
			base = 1
		}
		fire_only_once = no
		
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 200
			}
			custom_effect_tooltip = ENG_naval_games_tt
			navy_experience = 50
		}
	}
	ENG_british_commonwealth_air_training_plan = {
		icon = generic_prepare_civil_war

		available = {
			has_completed_focus = ENG_our_sword_and_shield
		}
		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}
		custom_cost_text = ENG_600_british_money 
		cost = 0 

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes
		
		complete_effect = {
			add_to_variable = {
				ENG_air_training_xp_gain_factor_var = 0.2
			}
			add_to_variable = {
				ENG_air_mission_xp_gain_factor_var = 0.1
			}
			add_to_variable = {
				ENG_experience_gain_air_var = 0.05
			}
			add_to_variable = {
				ENG_experience_gain_air_factor_var = 0.1
			}
			custom_effect_tooltip = ENG_air_training_tt
			air_experience = 50
		}
	}
	ENG_long_term_rearmament = {
		icon = generic_prepare_civil_war

		available = {
			AND = {
				tag = ENG
				has_completed_focus = ENG_thomas_inskip
			}
		}
		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}
		custom_cost_text = ENG_600_british_money 
		cost = 0 

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes
		
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 600
			}
			add_timed_idea = {
				idea = ENG_long_term_rearmament
				days = 600
			}
		}
	}
	ENG_short_term_rearmament = {
		icon = generic_prepare_civil_war

		available = {
			AND = {
				tag = ENG
				has_completed_focus = ENG_churchill
			}
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 800
    			compare = greater_than_or_equals
			}
		}
		custom_cost_text = ENG_800_british_money 
		cost = 0 

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes

		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 800
			}
			every_state = {
				limit = {
					OR = {
						state = 126
						state = 120
						state = 127
						state = 338
						state = 125
						state = 122
						state = 130
					}
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 2
			}
		}
	}
	ENG_collect_budget = {

		icon = eng_install_government

		available = {
			tag = ENG
		}

		visible = {
		}

		ai_will_do = {
			factor = 0
		}

		selectable_mission = no
		days_mission_timeout = 185
		is_good = no
		fire_only_once = no

		days_remove = 185	

		activation = {
			date > 1936.01.01
			OR = {
				NOT = {
					JAP = {
						has_war_with = USA
					}
				}
				date < 1941.2.1
			}
		}

		available = {
		}

		timeout_effect = {
			hidden_effect = {
				activate_mission = ENG_collect_budget			
			}
		}
		cancel_trigger = {
		
		
			JAP = {
				has_war_with = USA
			}
			date > 1941.2.1
			
			
 		}
		complete_effect = {
			set_variable = {
				var = budget_income_1
				value = num_of_civilian_factories
			}
			if = {
				limit = {
					has_idea = sir_john_simon
				}
				add_to_variable = { var = british_money value = 400 }
			}

			if = {
				limit = {
					has_idea = civilian_economy
				}
				multiply_variable = {
					var = budget_income_1
					value = 67
				}
				multiply_variable = {
					var = budget_income_1
					value = 0.5
				}
			}
			else_if = {
				limit = {
					has_idea = low_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_income_1
					value = 63
				}
				multiply_variable = {
					var = budget_income_1
					value = 0.6
				}
			}
			else_if = {
				limit = {
					has_idea = partial_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_income_1
					value = 61
				}
				multiply_variable = {
					var = budget_income_1
					value = 0.75
				}
			}	
			else_if = {
				limit = {
					has_idea = war_economy 
				}
				multiply_variable = {
					var = budget_income_1
					value = 62
				}
				multiply_variable = {
					var = budget_income_1
					value = 1.15
				}
			}					
			add_to_variable = { var = resource_income value = resource_exported@rubber }
			add_to_variable = { var = resource_income value = resource_exported@chromium }
			add_to_variable = { var = resource_income value = resource_exported@tungsten }
			add_to_variable = { var = resource_income value = resource_exported@steel }
			add_to_variable = { var = resource_income value = resource_exported@oil }
			add_to_variable = { var = resource_income value = resource_exported@aluminium }
			add_to_variable = { var = resource_expenses value = resource_imported@rubber }
			add_to_variable = { var = resource_expenses value = resource_imported@chromium }
			add_to_variable = { var = resource_expenses value = resource_imported@tungsten }
			add_to_variable = { var = resource_expenses value = resource_imported@steel }
			add_to_variable = { var = resource_expenses value = resource_imported@oil }
			add_to_variable = { var = resource_expenses value = resource_imported@aluminium } 

			if = {
				limit = { has_idea = free_trade }
				multiply_variable = { var = resource_income value =  0.75 }
				multiply_variable = { var = resource_expenses value = 0.75 }
			}

			else_if = {
				limit = { has_idea = export_focus }
				multiply_variable = { var = resource_income value = 0.75 }
				multiply_variable = { var = resource_expenses value = 0.75 }
			} 

			else_if = {
				limit = { has_idea = limited_exports }
				multiply_variable = { var = resource_income value = 0.75 }
				multiply_variable = { var = resource_expenses value = 1.25 }
			} 

			set_variable = {
				var = budget_expenditure_1
				value = num_of_military_factories 
			}
			multiply_variable = {
				var = budget_expenditure_1
				value = 38
			}

			if = {
				limit = {
					has_idea = civilian_economy
				}
				multiply_variable = {
					var = budget_expenditure_1
					value = 0.9
				}
			}
			else_if = {
				limit = {
					has_idea = low_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_expenditure_1
					value = 1
				}
			}
			else_if = {
				limit = {
					has_idea = partial_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_expenditure_1
					value = 1.1
				}
			}	
			else_if = {
				limit = {
					has_idea = war_economy 
				}
				multiply_variable = {
					var = budget_expenditure_1
					value = 1.4
				}
			}

			set_variable = {
				var = budget_expenditure_2 
				value = num_of_naval_factories 
			}
			multiply_variable = {
				var = budget_expenditure_2
				value = 19
			}								

			if = {
				limit = {
					has_idea = civilian_economy
				}
				multiply_variable = {
					var = budget_expenditure_2
					value = 0.8
				}
			}
			else_if = {
				limit = {
					has_idea = low_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_expenditure_2
					value = 0.9
				}
			}
			else_if = {
				limit = {
					has_idea = partial_economic_mobilisation 
				}
				multiply_variable = {
					var = budget_expenditure_2
					value = 1
				}
			}	
			else_if = {
				limit = {
					has_idea = war_economy 
				}
				multiply_variable = {
					var = budget_expenditure_2
					value = 1.1
				}
			}

			#add_to_variable = { var = british_money value = resource_income }	
			add_to_variable = { var = british_money value = budget_income_1 }	
			subtract_from_variable = { var = british_money value = budget_expenditure_1 }
			subtract_from_variable = { var = british_money value = budget_expenditure_2 }
			subtract_from_variable = { var = british_money value = resource_expenses }
			subtract_from_variable = { var = british_money value = british_interest }
		
			set_variable = { var = trade_expense_show value = resource_expenses }
			set_variable = { var = trade_income_show value = resource_income }
			clear_variable = resource_expenses
			clear_variable = resource_income 
		}
		remove_effect = {
			ENG_budget_effects = yes 
		}
	}
	
	ENG_take_a_loan = {

		icon = eng_trade_unions_support

		available = {
			tag = ENG
			has_stability > 0.2
		}

		visible = {
		}
		priority = 100

		days_re_enable = 0

		cost = 0 

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				has_stability > 1
			}
		}
		
		complete_effect = {
			add_stability = -0.04
			add_to_variable = {
				var = british_money
				value = 400
			}
			add_to_variable = {
				var = british_loans
				value = 400
			}
			add_to_variable = {
				var = british_interest
				value = 20
			}
			custom_effect_tooltip = ENG_secure_a_loan_tt
		}
	}
	ENG_unfavourable_trades_in_the_commonwealth = {

        icon = eng_trade_unions_demand

       available = {

		}

		visible = {
		}


		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 100
    			compare = greater_than_or_equals
			}
			check_variable = {
    			var = british_interest
   				value = 0
    			compare = greater_than_or_equals
			}
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 100
    			compare = greater_than_or_equals
			}
		}

		custom_cost_text = ENG_10_british_money

		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			subtract_from_variable = { var = british_money value = 100 }
			country_event = { id = britain.49 }
		}
		
	}
	ENG_reconcile_ireland = {

        icon = eng_trade_unions_demand

        available = {
            has_completed_focus = ENG_increase_colonial_expenses
        }

        visible = {
        }

		fire_only_once = yes
        custom_cost_trigger = {
            check_variable = {
                var = british_money
                   value = 400
                compare = greater_than_or_equals
            }
            check_variable = {
                var = british_interest
                   value = 0
                compare = greater_than_or_equals
            }
        }

        custom_cost_trigger = {
            check_variable = {
                var = british_money
                   value = 400
                compare = greater_than_or_equals
            }
        }

        custom_cost_text = ENG_400_british_money

        ai_will_do = {
            factor = 0
        }

        complete_effect = {
            subtract_from_variable = { var = british_money value = 400 }
        }
        remove_effect = {
			IRE = { give_resource_rights = { receiver = ENG state = 113 } }
        }
    }

	ENG_decrease_length_of_shifts = {

		icon = generic_independence

		available = {
			has_completed_focus = ENG_adjust_budget
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		fire_only_once = no


		modifier = {
			stability_factor = -0.10
		}

		days_remove = 90
		days_re_enable = 90

		custom_cost_trigger = {
			always = yes
		}

		custom_cost_text = ENG_200_british_money_2

		complete_effect = {
			custom_effect_tooltip = decrease_length_of_shifts_money_tt
			add_to_variable = {
				var = british_money
				value = 200
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 80
				has_stability > 0.9
			}			
		}
	}	

	ENG_expand_shadow_scheme = {
		icon = generic_political_discourse

		available = {
			tag = ENG
			has_completed_focus = shadow_scheme_focus
		}

		visible = {
			NOT = {
				has_war_with = GER 
			}
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_400_british_money 

		days_re_enable = 90 

		fire_only_once = no

		ai_will_do = {
			factor = 150
		}
		
		complete_effect = {
			custom_effect_tooltip = ENG_shadow_scheme_decision_tt
			subtract_from_variable = {
				var = british_money
				value = 400
			}
			hidden_effect = {
				ENG = {
					random_owned_controlled_state = {
						limit = {
							is_in_home_area = yes
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
							NOT = { has_state_flag = shadow_scheme_2AF }
						}
						set_state_flag = shadow_scheme_2AF
					}
				}
			}
		}
	}

	ENG_invest_in_home_defence = {
		icon = hol_draw_up_staff_plans

		available = {
			tag = ENG
		}

		days_remove = 365

		visible = {
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_400_british_money 

		days_re_enable = 180 

		fire_only_once = no
		
		modifier = {
			production_speed_bunker_factor = 0.25
			production_speed_coastal_bunker_factor = 0.25
			production_speed_anti_air_building_factor = 0.25
			production_speed_radar_station_factor = 0.25
			production_speed_infrastructure_factor = 0.25 
			production_speed_naval_base_factor = 0.25 
			production_speed_rail_way_factor = 0.25
			production_speed_supply_node_factor = 0.25
			production_speed_air_base_factor = 0.25
		}

		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			custom_effect_tooltip = ENG_invest_in_home_defence_tt
			subtract_from_variable = {
				var = british_money
				value = 600
			}
		}
	}

	ENG_GHQ_line = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {
		}
		available = {
			NOT = {
				CZE = {
					controls_state = 70

				}
			}
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}


		custom_cost_text = ENG_400_british_money 
		
		modifier = {
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			subtract_from_variable = {
				var = british_money
				value = 500
			}
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_2 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag
				NOT = {
					has_country_flag = ENG_GHQ_wait
				}	
			}	
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}


		custom_cost_text = ENG_400_british_money 
		
		modifier = {
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			subtract_from_variable = {
				var = british_money
				value = 400
			}
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_2
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_3 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag_2

				NOT = {
					has_country_flag = ENG_GHQ_wait
				}
			}	
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}


		custom_cost_text = ENG_400_british_money 
		
		modifier = {
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			subtract_from_variable = {
				var = british_money
				value = 400
			}
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_3
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag_2
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_4 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag_3
				NOT = {
					has_country_flag = ENG_GHQ_wait
				}
			}	
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}


		custom_cost_text = ENG_400_british_money 
		
		modifier = {
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			subtract_from_variable = {
				var = british_money
				value = 400
			}
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_4
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag_3
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
			}
		}
	}	
	ENG_dev_can = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 800
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_800_british_money 

		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 800
			}
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation

			CAN = {
				random_owned_state = {
					limit = {
						is_core_of = CAN  
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex 
						level = 4
						instant_build = yes 
					}
				}
				random_owned_state = {
					limit = {
						is_core_of = CAN  
						is_coastal = yes
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = dockyard 
						level = 5
						instant_build = yes 
					}
				}
			}

			if = {
				limit = {
					date < 1937.1.1
				}
				
				CAN = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
				}
				CAN = {
					add_political_power = 200
				}
			}
			else = {
				
				CAN = {
					add_political_power = 300
				}
			}
			
		}
	}
	ENG_dev_saf = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 800
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_800_british_money 

		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 800
			}
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
			

			SAF = {
				random_owned_state = {
					limit = {
						is_core_of = SAF  
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex 
						level = 4
						instant_build = yes 
					}
				}
				random_owned_state = {
					limit = {
						is_core_of = SAF  
						is_coastal = yes
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = dockyard 
						level = 5
						instant_build = yes 
					}
				}
			}

			if = {
				limit = {
					date < 1937.1.1
				}
				
				SAF = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
				}
				SAF = {
					add_political_power = 200
				}
			}
			else = {
				
				SAF = {
					add_political_power = 300
				}
			}
		}
	}
	ENG_dev_raj = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 800
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_800_british_money 

		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 800
			}
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
			

			RAJ = {
				random_owned_state = {
					limit = {
						is_core_of = RAJ  
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex 
						level = 4
						instant_build = yes 
					}
				}
				random_owned_state = {
					limit = {
						is_core_of = RAJ  
						is_coastal = yes
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = dockyard 
						level = 5
						instant_build = yes 
					}
				}
			}

			if = {
				limit = {
					date < 1937.1.1
				}
				
				RAJ = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
				}
				RAJ = {
					add_political_power = 200
				}
			}
			else = {
				
				RAJ = {
					add_political_power = 300
				}
			}
		}
	}
	ENG_dev_ast = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 800
    			compare = greater_than_or_equals
			}
		}



		custom_cost_text = ENG_800_british_money 

		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			subtract_from_variable = {
				var = british_money
				value = 800
			}
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
		

			AST = {
				random_owned_state = {
					limit = {
						is_core_of = AST  
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex 
						level = 4
						instant_build = yes 
					}
				
				}
				random_owned_state = {
					limit = {
						is_core_of = AST  
						is_coastal = yes
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = dockyard 
						level = 5
						instant_build = yes 
					}
				}
			}

			if = {
				limit = {
					date < 1937.1.1
				}
				
				AST = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
				}
				AST = {
					add_political_power = 200
				}
			}
			else = {
				
				AST = {
					add_political_power = 300
				}
			}
		}
	}		

	ENG_support_china = {

		name = CHI_expand_the_burma_road

		icon = generic_industry

		allowed = {
			tag = ENG			
		}

		visible = {

		}

		available = {
			JAP = {
				has_completed_focus = JAP_intervene_in_china
			}
		}

		visible = {
			country_exists = CHI 
		}

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 200
    			compare = greater_than_or_equals
			}
		}

		custom_cost_text = ENG_200_british_money 

		ai_will_do = {
			factor = 60
		}

		fire_only_once = no

		modifier = {
			civilian_factory_use = 3		
		}

		days_remove = 180

		complete_effect = {
			
			
			subtract_from_variable = {
				var = british_money
				value = 200
			}
			
			if = {
				limit = {
					JAP = {
						NOT = {
							has_war_with = CHI
						}
					}
				}
				custom_effect_tooltip = USA_spawn_in_china_2
				add_to_variable = {
					var = global.china_spawn_in_boost
					value = 3
				}
				
				JAP = {
					add_to_variable = { JAP_needed_inf_equipment = 1600 }
					add_to_variable = { JAP_needed_horse_equipment = 500 }
					add_to_variable = { JAP_needed_artillery_equipment = 90 }
					add_to_variable = { JAP_needed_heavy_artillery_equipment = 12 }
					add_to_variable = { JAP_needed_field_gun_equipment = 12 }
					add_to_variable = { JAP_needed_pack_artillery_equipment = 12 }
					add_to_variable = { JAP_needed_anti_air_equipment = 12 }
					add_to_variable = { JAP_needed_radio_equipment = 36 }
					add_to_variable = { JAP_needed_support_equipment = 150 }
					add_to_variable = { JAP_needed_special_equipment = 180 }
					add_to_variable = { JAP_needed_motorized_equipment = 44 }
					add_to_variable = { JAP_needed_manpower = 25000 }
				}
				if = {
					limit = {
						check_variable = {
							var = global.CHI_chi_weapon_clicks
							value = 0 
							compare = less_than_or_equals
							
						}
					}
					set_variable = { global.CHI_chi_weapon_clicks = 3 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = global.CHI_chi_weapon_clicks
							value = 0 
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { global.CHI_chi_weapon_clicks = 3 }
				}
			} 
			if = {
				limit = {
					JAP = {
						has_war_with = CHI
					}
				}
				custom_effect_tooltip = "Spawns 3 Juntuan units for China"
				hidden_effect = {
					CHI = {
						random_owned_controlled_state  = {
						
							prioritize = { 
								605	
							}
							
							for_loop_effect = {
								end = 3
								
								create_unit = {
									division = "division_template = \"Juntuan\" start_experience_factor = 0.2 start_equipment_factor = 1"
									owner = CHI
								}
							}
						}
					}
				}
			}
		}  
	

		remove_effect = {
			CHI = {
				add_equipment_to_stockpile = { type = infantry_equipment amount = 1000 producer = ENG }
				add_equipment_to_stockpile = { type = support_equipment amount = 200 producer = ENG }
				add_equipment_to_stockpile = { type = artillery_equipment amount = 100 producer = ENG }
				add_equipment_to_stockpile= { type = pack_artillery_equipment amount = 100 producer = ENG }
				add_equipment_to_stockpile = { type = fighter_equipment amount = 33 producer = ENG }
				add_equipment_to_stockpile = { type = light_tank_chassis amount = 100 producer = ENG }
			}
			
		}	
			
	}
	

	ENG_order_weapons_in_USA = {
		icon = generic_prepare_civil_war
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}
		
		days_remove = 90
		ai_will_do = {
			factor = 10
			modifier = {
				has_equipment = {
					infantry_equipment < 1
				}
				factor = 50
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		custom_cost_text = ENG_400_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}

		complete_effect = {
			subtract_from_variable = { var = british_money value = 400 }
		}

		remove_effect = {
			USA = {
				USA_infantry_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 5000
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = radio_equipment
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 500
				producer = USA
			}
		}
	}

	ENG_order_artillery_in_USA = {
		icon = ger_military_buildup
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}
		days_remove = 90

		ai_will_do = {
			factor = 5
			modifier = {
				has_equipment = {
					artillery_equipment < 1
				}
				factor = 50
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		custom_cost_text = ENG_400_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}

		complete_effect = {
			subtract_from_variable = { var = british_money value = 400 }
		}

		remove_effect = {
			USA = {
				USA_infantry_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				producer = USA
				amount = 600
			}
			add_equipment_to_stockpile = {
				type = heavy_artillery_equipment
				producer = USA
				amount = 300
			}
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				producer = USA
				amount = 400
			}
			add_equipment_to_stockpile = {
				type = anti_air_equipment
				producer = USA
				amount = 400
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 400
				producer = USA
			}

		}
	}

	ENG_order_tanks_in_USA = {
		icon = generic_tank
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}

		visible = {
		}

		days_remove = 120

		ai_will_do = {
			factor = 5
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
		}

		custom_cost_text = ENG_400_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 400
    			compare = greater_than_or_equals
			}
		}

		complete_effect = {
			subtract_from_variable = { var = british_money value = 400 }
		}

		remove_effect = {
			USA = {
				USA_armor_industry_level_up = yes 
			}

			if = {
				limit = {
					ENG = {
						has_country_flag = ENG_chose_tank_type_flag
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_light_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = light_tank_chassis 
						producer = ENG 
						amount = 1100 #300
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_medium_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						producer = ENG 
						amount = 800 #300
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_heavy_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = heavy_tank_chassis
						producer = ENG 
						amount = 450 #200
					}
				}
			}
			else = {
				country_event = { id = britain.51 }
			}	
		}
	}

	ENG_order_fighters_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}

		days_remove = 90

		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					small_plane_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}
		modifier = {
		}
		custom_cost_text = ENG_600_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}


		complete_effect = {
			subtract_from_variable = { 
				var = british_money 
				value = 600 
			}
		}
		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = small_plane_airframe
				amount = 330
			}
		}
	}

	ENG_order_heavy_fighters_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
			#always = no
		}

		days_remove = 120

		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					medium_plane_fighter_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}
		modifier = {
		}
		custom_cost_text = ENG_600_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}


		complete_effect = {
			subtract_from_variable = { 
				var = british_money 
				value = 600 
			}
		}
		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = medium_plane_fighter_airframe
				amount = 200
			}
		}
	}

	ENG_order_bombers_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {

		}
		days_remove = 120
		cost = 100
		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					medium_plane_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}
		modifier = {
			
		}
		custom_cost_text = ENG_600_british_money 

		custom_cost_trigger = {
			check_variable = {
    			var = british_money
   				value = 600
    			compare = greater_than_or_equals
			}
		}

		complete_effect = {
			subtract_from_variable = { var = british_money value = 600 }
				 
		}
		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes			
			}
			add_equipment_to_stockpile = {
				type = medium_plane_airframe
				amount = 150
			}
		}
	}
}

operations = {
	ENG_dig_in_Tobruk = {
	
		icon = generic_operation

		allowed = {
			original_tag = ENG
		}

	
		available = {
			OR = {
				ITA = {
					controls_province = 1130 
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_province = 1130
				}
			}
			
		}

		days_mission_timeout = 20

		fire_only_once = yes
		priority = 100
		is_good = yes

		activation = {
			date < 1941.1.1
			AND = {
				OR = {
					ENG = {
						controls_province = 4136 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 4136
					}
				}
				OR = {
					ENG = {
						controls_province = 9992 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 9992
					}
				}
				OR = {
					ENG = {
						controls_province = 13078 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 13078
					}
				}
				OR = {
					ENG = {
						controls_province = 1130 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 1130
					}
				}
			}
		}

		modifier = {
		}
		cancel_trigger = {
			OR = {
				ITA = {
					controls_province = 1130 
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 1130
				}
			}
 		}
		
		timeout_effect = {
			451 = {
				set_building_level = {
					type = bunker
					province = 9992
					level = 8
				}								
			}
			663 = {
				set_building_level = {
					type = bunker
					province = 13078
					level = 8
				}								
			}
			451 = {
				set_building_level = {
					type = bunker
					province = 4136
					level = 8
				}								
			}
			451 = {
				set_building_level = {
					type = bunker
					province = 1130
					level = 8
				}								
			}
			
		}
			
	
		complete_effect = {
			

			
		}
	}
	titov_partisans = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 10			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			random_state = {
				prioritize = { 105 }
				limit = {
					is_core_of = YUG
					OR = {
						is_controlled_by = GER 
						is_controlled_by = BUL 
						is_controlled_by = ROM 
						is_controlled_by = ITA 
						is_controlled_by = SLO 
						is_controlled_by = SPR 
						is_controlled_by = EFR  
					}
					NOT = {
						state = 764
						state = 45
					}
					resistance < 50
				}
				add_resistance = 15
			}
		    GER = { country_event = { id = britain.46 } }	
		}	
	}

	french_partisans_normandy = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 5			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			14 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			15 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			30 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.39 } }	
		}	
	}

	french_partisans_east = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 5			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			785 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			29 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			18 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.40 } }	
		}	
	}

	french_partisans_centre = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 50
		
		modifier = {
			civilian_factory_use = 10			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			16 = {
				damage_building = {
				  type = infrastructure
				  damage = 4
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
				damage_building = {
				  type = arms_factory
				  damage = 3
				}
				damage_building = {
				  type = industrial_complex
				  damage = 3
				}
			}
			27 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			24 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.41 } }	
		}	
	}

	ENG_invade_iraq = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			OR = {
				FRA = { has_capitulated = yes }
			}
		}

		visible = {
			NOT = {
				IRQ = { exists = no }
			}
		}		
		cost = 0
		
		modifier = {
		}

		days_remove = 45
		
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				date > 1941.4.1 # irl british invasion

				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 446 # Cairo
				has_full_control_of_state = 457 # Eastern Desert
			}
		}
		remove_effect = {
			declare_war_on = {	
				target = IRQ
				type = annex_everything
			}
			GER = { add_to_faction = IRQ }
			IRQ = { 
				add_to_war = { 
					targeted_alliance = GER
					enemy = ENG
				}
			}
			hidden_effect = {
				
				RAJ = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				if = {
					limit = {
						USA = {
							has_war_with = GER
						}
					}
					USA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}	
				AST = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				CAN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				if = {
					limit = {
						country_exists = NZL
					}
					NZL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}	
				if = {
					limit = {
						MEX = {
							is_in_faction_with = ENG
						}	
					}
					MEX = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						BRA = {
							is_in_faction_with = ENG
						}	
					}
					BRA = { 
						add_to_war = { 
							targeted_alliance = BRA
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = SAF
					}
					SAF = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						IRE = {
							is_in_faction_with = ENG
						}	
					}
					IRE = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					POL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}

			}
		}	
	}
	
	ENG_operation_exporter = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			ENG = {
				448 = { is_controlled_by_ROOT_or_ally = yes } 
				661 = { is_controlled_by_ROOT_or_ally = yes } 
				449 = { is_controlled_by_ROOT_or_ally = yes } 
				662 = { is_controlled_by_ROOT_or_ally = yes } 
				450 = { is_controlled_by_ROOT_or_ally = yes } 
				663 = { is_controlled_by_ROOT_or_ally = yes } 
				451 = { is_controlled_by_ROOT_or_ally = yes } 
				NOT = {
					has_war_with = EFR
				}	
			}	

		}

		visible = {
	
		}		
		cost = 0
		
		modifier = {
			
		}
		
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			declare_war_on = {
				target = EFR
				type = annex_everything
			}
			EFR = { 
				add_to_war = { 
					targeted_alliance = GER
					enemy = ENG
				}
			}
			if = {
				limit = {
					EFR = {
						has_idea = neutrality_idea
					}
				}
				EFR = {
					remove_ideas = neutrality_idea
				}
			}
			hidden_effect = {
				
				RAJ = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				if = {
					limit = {
						USA = {
							has_war_with = GER
						}
					}
					USA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}	
				AST = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				CAN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				if = {
					limit = {
						country_exists = NZL
					}
					NZL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}	
				if = {
					limit = {
						MEX = {
							is_in_faction_with = ENG
						}	
					}
					MEX = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						BRA = {
							is_in_faction_with = ENG
						}	
					}
					BRA = { 
						add_to_war = { 
							targeted_alliance = BRA
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = SAF
					}
					SAF = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						IRE = {
							is_in_faction_with = ENG
						}	
					}
					IRE = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					POL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}

			}	
		}	
	}

	ENG_operation_countenance = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			SOV = { has_defensive_war_with = GER }
			PER = { is_ai = yes }
		}

		visible = {
			NOT = {
				PER = { exists = no }
			}
		}		
		cost = 0

		days_remove = 30
		
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 1000
				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 446 # Cairo
				has_full_control_of_state = 457 # Eastern Desert
				IRQ = { has_capitulated = yes }
			}
			modifier = {
				add = 1000
				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 454 # Palestine
				has_full_control_of_state = 455 # Jordan
				OR = {
					date > 1941.10.15
					USA = { has_war_with = GER }
				}
				NOT = { IRQ = { has_full_control_of_state = 675 } } # Al Hajara
				NOT = { IRQ = { has_full_control_of_state = 291 } } # Baghdad
				NOT = { IRQ = { has_full_control_of_state = 676 } } # Mosul
			}
		}
		complete_effect = {
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_countenance_flag
				} 
					
			}
			
		}
		remove_effect = {
			PER = { give_resource_rights = { receiver = ENG state = 413 } }
			PER = { give_resource_rights = { receiver = ENG state = 412 } }
			PER = { give_resource_rights = { receiver = ENG state = 411 } }
			
			SOV = {
				transfer_state = 420
				transfer_state = 419
				transfer_state = 418
				transfer_state = 266
	 			transfer_state = 416
			}
			ENG = { 
				annex_country = {
					target = PER
					transfer_troops = no
				}	
				
			}

			if = {
				limit = {
					IRQ = {
						is_ai = yes
					}
				}
				ITA = {
					annex_country = {
						target = IRQ
						transfer_troops = yes
					}
				}
			}
			hidden_effect = {
				news_event = { id = news.348 days = 1 } 
			}
		}	
	}	
}
