#Category only allowed for CHI

CHI_roads_of_life = {
	CHI_purchase_german_equipment = {

		icon = generic_prepare_civil_war

		available = {
			date < 1939.1.1
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}	
		}

		visible = {
			date < 1939.1.1

			
		}
		ai_will_do = {
			factor = 12
			
		}
		fire_only_once = no

		days_remove = 90
		days_re_enable = 1

		complete_effect = {
			CHI_hyper_inflation_level_up = yes
			
		}
		
		remove_effect = {
			
			
			CHI = {
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 5500 producer = GER }
				add_equipment_to_stockpile = { type = horse_equipment amount = 1500 producer = GER }
				add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 250 producer = GER }
				add_equipment_to_stockpile = { type = support_equipment amount = 250 producer = GER }
				add_equipment_to_stockpile = { type = radio_equipment amount = 200 producer = GER }
				add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 60 producer = GER }
				add_equipment_to_stockpile = { type = motorized_equipment amount = 200 producer = GER }
				add_equipment_to_stockpile = { type = light_tank_chassis_1936 amount = 100	 producer = CHI }
			}
			GER = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
	}
	CHI_overseas_imports_placeholder = {

		icon = ger_military_buildup

		available = {
			always = no 
			
		}
		

		visible = {
			has_completed_focus = CHI_approach_the_allies
			has_country_flag = CHI_informed_about_losing_port_lend_lease_flag

			
		}
		ai_will_do = {
			factor = 12
			
		}
		fire_only_once = no

		days_remove = 90
		days_re_enable = 1
		complete_effect = {
			custom_effect_tooltip = CHI_how_to_restart_overseas_aid_tt
			
		}
		
		remove_effect = {
			
			
		}
	}
	CHI_overseas_imports_decision = {

		icon = ger_military_buildup

		available = {
			custom_trigger_tooltip = {
				tooltip = CHI_has_to_control_coast_tt2
				NOT = {
					any_core_state = {
						NOT = {
							state = 609
							state = 610
							state = 716
							state = 745
							state = 608
							state = 614
							state = 597
							state = 743
							state = 598
						}
						is_fully_controlled_by = CHI
						any_province_building_level = {
							province = {
								all_provinces = yes
								limit_to_naval_base = yes
							}
							building = naval_base
							level > 4
						}
					}

				}
			}
		}
		
		activation = {
			has_completed_focus = CHI_approach_the_allies
			any_core_state = {
				NOT = {
					state = 609
					state = 610
					state = 716
					state = 745
					state = 608
					state = 614
					state = 597
					state = 743
					state = 598
				}
				is_fully_controlled_by = CHI
				any_province_building_level = {
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					building = naval_base
					level > 4
				}
			}		
		}

		visible = {
			tag = CHI
		}
		ai_will_do = {
			factor = 100
			
		}
		fire_only_once = no
		days_mission_timeout = 120
		selectable_mission = no
		is_good = yes
		complete_effect = {
			country_event = { id = china.207 }
		}
		timeout_effect = {
			custom_effect_tooltip = CHI_more_coastal_state_is_more_tt

			hidden_effect = {
				if = {
					limit = {
						any_core_state = {
							NOT = {
								state = 609
								state = 610
								state = 716
								state = 745
								state = 608
								state = 614
								state = 597
								state = 743
								state = 598
							}
							is_fully_controlled_by = CHI
							any_province_building_level = {
								province = {
									all_provinces = yes
									limit_to_naval_base = yes
								}
								building = naval_base
								level > 4
							}
						}
					}
					activate_mission = CHI_overseas_imports_decision
				}
				
			}
			if = {
				limit = {
					check_variable = {
						var = CHI_coastal_state_counter_var
						value = 4
						compare = greater_than_or_equals
					}
				}
				CHI = {
					add_equipment_to_stockpile = { type = infantry_equipment amount = 6000 producer = USA }
					add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
					add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
					add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
					add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
				}
				custom_effect_tooltip = CHI_modify_industry_spriti_intro
				add_to_variable = { 
					var = CHI_research_speed_factor_var 
					value = 0.02
					tooltip = research_speed_factor_tooltip
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CHI_coastal_state_counter_var
						value = 3
						compare = greater_than_or_equals
					}
				}
				CHI = {
					add_equipment_to_stockpile = { type = infantry_equipment amount = 5000 producer = USA }
					add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
					add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
					add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
					add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
				}
				custom_effect_tooltip = CHI_modify_industry_spriti_intro
				add_to_variable = { 
					var = CHI_research_speed_factor_var 
					value = 0.015
					tooltip = research_speed_factor_tooltip
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CHI_coastal_state_counter_var
						value = 2
						compare = greater_than_or_equals
					}
				}
				CHI = {
					add_equipment_to_stockpile = { type = infantry_equipment amount = 4000 producer = USA }
					add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
					add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
					add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
					add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
				}
				custom_effect_tooltip = CHI_modify_industry_spriti_intro
				add_to_variable = { 
					var = CHI_research_speed_factor_var 
					value = 0.01
					tooltip = research_speed_factor_tooltip
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CHI_coastal_state_counter_var
						value = 1
						compare = greater_than_or_equals
					}
				}
				CHI = {
					add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 producer = USA }
					add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
					add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
					add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
					add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
					add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
				}
				custom_effect_tooltip = CHI_modify_industry_spriti_intro
				add_to_variable = { 
					var = CHI_research_speed_factor_var 
					value = 0.005
					tooltip = research_speed_factor_tooltip
				}
			}
			
			
			if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 1 }
				}
				
				add_tech_bonus = {
					name = CHI_infantry
					bonus = 0.5
					uses = 1
					category = infantry_weapons
				}
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 2 }
				}
				add_tech_bonus = {
					name = CHI_industry_electronics
					bonus = 0.5
					uses = 1
					category = industry
					category = electronics
				}
				
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 3 }
				}
				add_tech_bonus = {
					name = CHI_arty
					bonus = 0.5
					uses = 1
					category = artillery
				}
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 4 }
				}
				random_list = {
					50 = { 
						add_tech_bonus = {
							name = CHI_infantry
							bonus = 0.5
							uses = 1
							category = armor
						}
					}
					50 = {
						add_tech_bonus = {
							name = CHI_air
							bonus = 0.5
							uses = 1
							category = air_equipment
						}
					}

				}
				set_variable = { var = CHI_next_research_bonus value =  1 }
			}
			
			
		}
	}

	CHI_gansu_roads_decision = {

		icon = ger_military_buildup

		available = {
			custom_trigger_tooltip = {
				tooltip = CHI_gansu_road_closes_tt	
				has_global_flag = fake_flag
					
			}
			
			
		}
		activation = {
			has_completed_focus = CHI_expand_the_gansu_road
			NOT = {
				SOV = {
					has_war_with = GER 
				}
			}
						
		}

		visible = {
			tag = CHI
		}
		ai_will_do = {
			factor = 100
			
		}
		fire_only_once = no
		days_mission_timeout = 120
		selectable_mission = no
		is_good = yes

		timeout_effect = {

			hidden_effect = {
				if = {
					limit = {
						NOT = {
							SOV = {
								has_war_with = GER 
							}
						}

					}
					activate_mission = CHI_gansu_roads_decision
				}
				
			}
			CHI = {
				add_equipment_to_stockpile = { type = infantry_equipment amount = 3500 producer = SOV }
				add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = SOV }
				add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = SOV }
				add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = SOV }
				add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = SOV }
				add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = SOV }
				add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = SOV }

				
			}
			custom_effect_tooltip = CHI_in_addition_we_receive_tt
			CHI = {
				add_equipment_to_stockpile = { type = infantry_equipment amount = CHI_SOV_extra_guns producer = SOV }
				if = {
					limit = {
						check_variable = { CHI_SOV_extra_arty = 1 }
					}
					if = {
						limit = {
							has_tech = artillery8_2
						}
						add_equipment_to_stockpile = { type = artillery_equipment amount = 360 producer = SOV }
					}
					else_if = {
						limit = {
							has_tech = heavy_artillery6_1
						}
						add_equipment_to_stockpile = { type = heavy_artillery_equipment amount = 175 producer = SOV }
					}

					else_if = {
						limit = {
							has_tech = pack_artillery4
						}
						add_equipment_to_stockpile = { type = pack_artillery_equipment amount = 660 producer = SOV }
					}
					
					else_if = {
						limit = {
							has_tech = artillery4
						}
						add_equipment_to_stockpile = { type = artillery_equipment amount = 360 producer = SOV }
					}
					else_if = {
						limit = {
							has_tech = heavy_artillery2
						}
						add_equipment_to_stockpile = { type = heavy_artillery_equipment amount = 175 producer = SOV }
					}
					else_if = {
						limit = {
							has_tech = field_gun3
						}
						add_equipment_to_stockpile = { type = field_equipment amount = 440 producer = SOV }
					}
					else_if = {
						add_equipment_to_stockpile = { type = artillery_equipment amount = 360 producer = SOV }
					}

				}
				add_equipment_to_stockpile = { type = artillery_equipment amount = CHI_SOV_extra_guns producer = SOV }
				add_equipment_to_stockpile = { type = small_plane_airframe amount = CHI_SOV_extra_fighters producer = SOV }
				add_equipment_to_stockpile = { type = small_plane_cas_airframe amount = CHI_SOV_extra_cas producer = SOV }
				add_equipment_to_stockpile = { type = light_tank_chassis amount = CHI_SOV_extra_light_tanks producer = SOV }
				add_equipment_to_stockpile = { type = motorized_equipment amount = CHI_SOV_extra_mot producer = SOV }
			}
			set_variable = { var = CHI_SOV_extra_guns value = 0 }
			set_variable = { var = CHI_SOV_extra_fighters value = 0 }
			set_variable = { var = CHI_SOV_extra_cas value = 0 }
			set_variable = { var = CHI_SOV_extra_light_tanks value = 0 }
			set_variable = { var = CHI_SOV_extra_mot value = 0 }
			set_variable = { var = CHI_SOV_extra_arty value = 0 }

			custom_effect_tooltip = CHI_modify_industry_spriti_intro
			add_to_variable = { 
				var = CHI_research_speed_factor_var 
				value = 0.01
				tooltip = research_speed_factor_tooltip
			}
			if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 1 }
				}
				
				add_tech_bonus = {
					name = CHI_infantry
					bonus = 0.5
					uses = 1
					category = infantry_weapons
				}
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 2 }
				}
				add_tech_bonus = {
					name = CHI_industry_electronics
					bonus = 0.5
					uses = 1
					category = industry
					category = electronics
				}
				
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 3 }
				}
				add_tech_bonus = {
					name = CHI_arty
					bonus = 0.5
					uses = 1
					category = artillery
				}
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 4 }
				}
				random_list = {
					50 = { 
						add_tech_bonus = {
							name = CHI_infantry
							bonus = 0.5
							uses = 1
							category = armor
						}
					}
					50 = {
						add_tech_bonus = {
							name = CHI_air
							bonus = 0.5
							uses = 1
							category = air_equipment
						}
					}

				}
				set_variable = { var = CHI_next_research_bonus value =  1 }
			}
			
			
		}
	}
	CHI_hanoi_route_decision = {

		icon = ger_military_buildup

		available = {
			FRA = {
				NOT = {
					controls_state = 671
				}
			}	
		}
		activation = {
			has_completed_focus = CHI_establish_hanoi_route
			FRA = {
				controls_state = 671
			}
						
		}

		visible = {
			tag = CHI
		}
		ai_will_do = {
			factor = 100
			
		}
		fire_only_once = no
		days_mission_timeout = 120
		selectable_mission = no
		is_good = yes

		timeout_effect = {

			hidden_effect = {
				if = {
					limit = {
						FRA = {
							controls_state = 671
						}

					}
					activate_mission = CHI_hanoi_route_decision
				}
			}
			if = {
				limit = {
					check_variable = { var = CHI_coastal_state_counter_var value = 4 compare = greater_than_or_equals }
				}
				custom_effect_tooltip = CHI_maximum_lend_lease_routes_reached_tt
			}
			else_if = {
				limit = {
					check_variable = { var = CHI_coastal_state_counter_var value = 3 compare = equals }
				}
				if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 1 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.005
						tooltip = research_speed_factor_tooltip
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { var = CHI_coastal_state_counter_var value = 2 compare = equals }
				}
				if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 2 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 4000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.01
						tooltip = research_speed_factor_tooltip
					}
				}
				else_if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 1 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.005
						tooltip = research_speed_factor_tooltip
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { var = CHI_coastal_state_counter_var value = 1 compare = less_than_or_equals }
				}
				if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 3 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 5000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.015
						tooltip = research_speed_factor_tooltip
					}
				}
				else_if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 2 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 4000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.01
						tooltip = research_speed_factor_tooltip
					}
				}
				else_if = {
					limit = {
						check_variable = { var = CHI_hanoi_route_dev_var value = 1 compare = equals }
					}
					CHI = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 producer = USA }
						add_equipment_to_stockpile = { type = horse_equipment amount = 900 producer = USA }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = support_equipment amount = 150 producer = USA }
						add_equipment_to_stockpile = { type = motorized_equipment amount = 100 producer = USA }
						add_equipment_to_stockpile = { type = radio_equipment amount = 60 producer = USA }
						add_equipment_to_stockpile = { type = anti_air_equipment_1 amount = 30 producer = USA }
					}
					custom_effect_tooltip = CHI_modify_industry_spriti_intro
					add_to_variable = { 
						var = CHI_research_speed_factor_var 
						value = 0.005
						tooltip = research_speed_factor_tooltip
					}
				}
			}
			if = {
				limit = {
					check_variable = { var = CHI_coastal_state_counter_var value = 0 compare = equals }
				}
				if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 1 }
				}
				
				add_tech_bonus = {
					name = CHI_infantry
					bonus = 0.5
					uses = 1
					category = infantry_weapons
				}
				add_to_variable = { var = CHI_next_research_bonus value =  1 }
			}
			else_if = {
				limit = {
					check_variable = { CHI_next_research_bonus = 2 }
				}
				add_tech_bonus = {
					name = CHI_industry_electronics
					bonus = 0.5
					uses = 1
					category = industry
					category = electronics
				}
					
					add_to_variable = { var = CHI_next_research_bonus value =  1 }
				}
				else_if = {
					limit = {
						check_variable = { CHI_next_research_bonus = 3 }
					}
					add_tech_bonus = {
						name = CHI_arty
						bonus = 0.5
						uses = 1
						category = artillery
					}
					add_to_variable = { var = CHI_next_research_bonus value =  1 }
				}
				else_if = {
					limit = {
						check_variable = { CHI_next_research_bonus = 4 }
					}
					random_list = {
						50 = { 
							add_tech_bonus = {
								name = CHI_infantry
								bonus = 0.5
								uses = 1
								category = armor
							}
						}
						50 = {
							add_tech_bonus = {
								name = CHI_air
								bonus = 0.5
								uses = 1
								category = air_equipment
							}
						}

					}
					set_variable = { var = CHI_next_research_bonus value =  1 }
				}
			}
		}
	}
}

CHI_anti_imperialism = {
	CHI_reignite_war = {

		icon = jap_conquer_china

		available = {
			JAP = { has_country_flag = jap_first_truce }
			CHI = { has_war = no }
			date > 1940.1.1
		}

		visible = {
			CHI = { has_war = no }
			JAP = { has_country_flag = jap_first_truce }
		}
		ai_will_do = {
			factor = 100
			
		}
		fire_only_once = yes
		days_remove = 30
		remove_effect = {
			create_wargoal = {
  			type = annex_everything
  			target = JAP
  			}
		}
	}
}

#Category allowed for all potential nationalist china
#Category visible when CHI_army_reform focus is completed
CHI_army_reform = {

	CHI_ai_reinforcements_2 = {

		icon = generic_prepare_civil_war

		available = {
			OR = {
				date > 1938.1.1	
				surrender_progress > 0.4
				OR = { ### Hubei
					JAP = { has_full_control_of_state = 620 }
					any_other_country = {
						is_in_faction_with = JAP
						controls_state = 620
						num_occupied_states > 8
					}
				}					
			}			
			CHI = {
				is_ai = yes
			}								
		}

		cost = 0
		ai_will_do = {
			factor = 500
		}

		visible = {		
			CHI = {
				is_ai = yes
			}			
			tag = CHI
		}
		fire_only_once = yes

		complete_effect = {
			CHI = {
				add_equipment_to_stockpile = {
					type = horse_equipment_0
						amount = 1000
						producer = CHI
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
						amount = 5000
						producer = CHI
				}			
			}	

				add_manpower = -300000

				division_template = {
					name = "Sanjiao Jun 1"
					priority = 2

					regiments = {
						volkssturm_infantry = { x = 0 y = 0 }
						volkssturm_infantry = { x = 0 y = 1 }
						volkssturm_infantry = { x = 0 y = 2 }
						
						volkssturm_infantry = { x = 1 y = 0 }
						volkssturm_infantry = { x = 1 y = 1 }
						volkssturm_infantry = { x = 1 y = 2 }
							
						volkssturm_infantry = { x = 2 y = 0 }
						volkssturm_infantry = { x = 2 y = 1 }
						volkssturm_infantry = { x = 2 y = 2 }

						volkssturm_infantry = { x = 3 y = 0 }
						volkssturm_infantry = { x = 3 y = 1 }
						volkssturm_infantry = { x = 3 y = 2 }		

						volkssturm_infantry = { x = 4 y = 0 }
						volkssturm_infantry = { x = 4 y = 1 }
						volkssturm_infantry = { x = 4 y = 2 }	
					}

					support = {
						artillery = { x = 0 y = 0 }
					   	engineer = { x = 0 y = 1 }
						anti_air_company = { x = 0 y = 2 }
					}
				}

				every_state = {
					limit = { state = 605 }
					create_unit = {
						division = "name = \"1. Sanjiao Jun\" division_template = \"Sanjiao Jun 1\" start_experience_factor = 0.2 start_equipment_factor = 0.9" 
						owner = CHI
					}		
				}
		}				
	}

	CHI_ai_reinforcements_1 = {

		icon = generic_prepare_civil_war

		available = {
			OR = {
				date > 1937.8.1	
				surrender_progress > 0.25
				OR = { ### Hubei
					JAP = { has_full_control_of_state = 620 }
					any_other_country = {
						is_in_faction_with = JAP
						controls_state = 620
						num_occupied_states > 4
					}
				}					
			}			
			CHI = {
				is_ai = yes
			}								
		}

		cost = 0
		ai_will_do = {
			factor = 500
		}

		visible = {		
			CHI = {
				is_ai = yes
			}			
			tag = CHI
		}
		fire_only_once = yes

		complete_effect = {
			CHI = {
				add_equipment_to_stockpile = {
					type = horse_equipment_0
						amount = 2000
						producer = CHI
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
						amount = 5000
						producer = CHI
				}			
			}	

				add_manpower = -300000

				division_template = {
					name = "Sanjiao Jun 1"
					priority = 2

					regiments = {
						volkssturm_infantry = { x = 0 y = 0 }
						volkssturm_infantry = { x = 0 y = 1 }
						volkssturm_infantry = { x = 0 y = 2 }
						
						volkssturm_infantry = { x = 1 y = 0 }
						volkssturm_infantry = { x = 1 y = 1 }
						volkssturm_infantry = { x = 1 y = 2 }
							
						volkssturm_infantry = { x = 2 y = 0 }
						volkssturm_infantry = { x = 2 y = 1 }
						volkssturm_infantry = { x = 2 y = 2 }

						volkssturm_infantry = { x = 3 y = 0 }
						volkssturm_infantry = { x = 3 y = 1 }
						volkssturm_infantry = { x = 3 y = 2 }		

						volkssturm_infantry = { x = 4 y = 0 }
						volkssturm_infantry = { x = 4 y = 1 }
						volkssturm_infantry = { x = 4 y = 2 }	
					}

					support = {
						artillery = { x = 0 y = 0 }
					   	engineer = { x = 0 y = 1 }
						anti_air_company = { x = 0 y = 2 }
					}
				}

				every_state = {
					limit = { state = 605 }
					create_unit = {
						division = "name = \"1. Sanjiao Jun\" division_template = \"Sanjiao Jun 1\" start_experience_factor = 0.2 start_equipment_factor = 0.9" 
						owner = CHI
					}			
				}
		}				
	}

	CHI_army_reform = {

		icon = generic_prepare_civil_war

		available = {
			if = {
				limit = {
					CHI = {
						is_ai = yes
					}
				}
				has_army_experience > 49
			}
			has_army_experience > 149
		}

		cost = 0
		ai_will_do = {
			factor = 500
		}
		days_remove = 30

		visible = {
			OR = {
				has_idea = CHI_army_corruption_1
				has_idea = CHI_army_corruption_2
				has_idea = CHI_army_corruption_3
			}
		}
		remove_effect = {
			if = {
				limit = { has_idea = CHI_army_corruption_1 }
				swap_ideas = {
					remove_idea = CHI_army_corruption_1
					add_idea = CHI_army_corruption_2
				}
			}
			else_if = {
				limit = { has_idea = CHI_army_corruption_2 }
				swap_ideas = {
					remove_idea = CHI_army_corruption_2
					add_idea = CHI_army_corruption_3
				}
			}
			else_if = {
				limit = { has_idea = CHI_army_corruption_3 }
				remove_ideas = CHI_army_corruption_3
			}
		}
		complete_effect = {
			if = {
				limit = {
					CHI = {
						is_ai = yes
					}
				}
				army_experience = -50
			}
			army_experience = -150
						
		}		
	}


	#Activates when the player picks CHI_60_divisions_plan decision
	CHI_bolster_our_ranks = {

		icon = generic_prepare_civil_war

		available = {
			num_divisions > 60
			has_army_manpower = { size > 549999 }
		}

		fire_only_once = yes
		
		days_mission_timeout = 180

		is_good = no

		activation = {
			always = no #Triggered from effect in CHI_60_divisions_plan
		}

		complete_effect = {
			add_war_support = 0.1
		}

		timeout_effect = {

		}
	}

	CHI_60_divisions_plan = {

		icon = generic_operation

		available = {
			
		}

		cost = 25
		ai_will_do = {
			factor = 1
		}
		fire_only_once = yes

		visible = {
		}

		days_remove = 180

		modifier = {
			training_time_army_factor = -0.35
		}

		complete_effect = {
			activate_mission = CHI_bolster_our_ranks
		}		
	}

}

special_projects = {

		CHI_fortify_shanghai = {

		cost = 50

		ai_will_do = {
			factor = 0
		}
		allowed = {
			tag = CHI
		}
		available = {
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
		}
		visible = {
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
		}
		days_remove = 50		

		fire_only_once = yes

		remove_effect = {
			if = {
				limit = { has_full_control_of_state = 613 }
				613 = { # Shanghai
					set_building_level = {
						type = bunker
						province = {
							id = 11913 #Nanjing
							id = 11982 #Nothing
							id = 10076 #Airbase
							id = 12052
							id = 7014 #Shanghai
						}
						level = 2
						instant_build = yes
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 3
								building = bunker
							}
						}
						set_building_level = {
							type = bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 3
							instant_build = yes
						}
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 2
								building = coastal_bunker
							}
						}
						set_building_level = {
							type = coastal_bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 2
							instant_build = yes
						}
					}					
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					613 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}

				}
				set_country_flag = CHI_shanghai_forts
			}
		}
	}
	

	CHI_the_chinese_hindenburg_line = {

		cost = 75

		ai_will_do = {
			factor = 25
		}

		allowed = {
			tag = CHI
		}
		available = {
			has_country_flag = CHI_shanghai_forts
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 606
				}
			}
		}
		
		visible = {
			has_country_flag = CHI_shanghai_forts
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 606
				}
			}
		}
		days_remove = 90		

		fire_only_once = yes

		remove_effect = {
			if = {
				limit = { has_full_control_of_state = 613 }
				613 = { # Shanghai
					set_building_level = {
						type = bunker
						province = {
							id = 11913 #Nanjing
							id = 11982 #Nothing
							id = 10076 #Airbase
							id = 12052
							id = 7014 #Shanghai
						}
						level = 3
						instant_build = yes
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 4
								building = bunker
							}
						}
						set_building_level = {
							type = bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 4
							instant_build = yes
						}
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 3
								building = coastal_bunker
							}
						}
						set_building_level = {
							type = coastal_bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 3
							instant_build = yes
						}
					}					
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					613 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 606 }
				606 = { # Anhui
					set_building_level = {
						type = bunker
						province = {
							id = 1099
							id = 1171
							id = 11937
							id = 10044
						}
						level = 2
						instant_build = yes
					}								
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					606 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 600 }
				600 = { # Jiangxi
					set_building_level = {
						type = bunker
						province = {
							id = 1153
						}
						level = 2
						instant_build = yes
					}								
				}
			}
		}
	}


CHI_fortify_the_burma_road = {

	cost = 50

	ai_will_do = {
		factor = 1
	}
	allowed = {
		tag = CHI
	}
	available = {
		NOT = {
			any_enemy_country = {
				has_full_control_of_state = 325
			}
		}
	}
	visible = {
		NOT = {
			any_enemy_country = {
				has_full_control_of_state = 325
			}
		}
	}
	days_remove = 50		

	fire_only_once = yes

	remove_effect = {
		if = {
			limit = { has_full_control_of_state = 325 }
			325 = { # Shanghai
				set_building_level = {
					type = bunker
					province = {
						id = 1196 #Nanjing
						id = 1653 #Nothing
						id = 7606 #Airbase
						id = 1172
						id = 7446
						id = 1319
						id = 12282 #Shanghai
					}
					level = 3
					instant_build = yes
				}
			}
		}
	}
}
}

economy_decisions = {
	CHI_forced_loans = {

		icon = ger_mefo_bills

		available = {
			has_hyper_inflation = yes
		}
		
		allowed = {
			tag = CHI
		}

		visible = {
			has_hyper_inflation = yes		
		}

		cost = 50
		ai_will_do = {
			factor = 1
			modifier = {
				OR = {
					has_idea = CHI_hyper_inflation_none
					has_idea = CHI_hyper_inflation_1
				}
				factor = 0
			}
			modifier = {
				has_idea = CHI_hyper_inflation_3
				factor = 2
			}
			modifier = {
				has_idea = CHI_hyper_inflation_4
				factor = 5
			}
			modifier = {
				has_idea = CHI_hyper_inflation_5
				factor = 10
			}
		}

		visible = {
		}

		days_re_enable = 60

		complete_effect = {
			CHI_hyper_inflation_level_down = yes
			add_stability = -0.03
			add_war_support = -0.03
		}		
	}	
}


