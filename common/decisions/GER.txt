#Category only allowed for GER
GER_surrender_category = {
	GER_der_kreig_ist_verlorer = {

		priority = 10

		icon = eng_puppet_usa

		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 7

		fire_only_once = yes

		activation = {
			surrender_progress > 0.79
		}

		visible = {
			
		}

		cancel_if_not_visible = yes

		is_good = no

		timeout_effect = {
			country_event = germany.701
		}
	}
}
GER_operation_barbarossa_category = {
	GER_operation_rosselsprung = {

		priority = 10

		icon = generic_scorched_earth

		available = {
			date > 1943.1.1
		}

		fire_only_once = yes


		visible = {
			has_war_with = SOV
			
		}

		complete_effect = {
			add_timed_idea = {
				idea = GER_operation_rosselsprung_idea
				days = 30
			}
			every_state = {
				limit = {
					is_core_of = YUG
					is_controlled_by = SOV
				}
				remove_province_modifier = {
					static_modifiers = { titov_modding }
					province = {
						all_provinces = yes
					}
				}
			}
		}
	}
	GER_steiner_counter_attack_decision = {
	
		allowed = {
		   tag = GER
		}

		visible = {
			SOV = {
				surrender_progress < 0.15
			}
			date > 1942.1.1
				
					
		}

		available = {
			has_completed_focus = GER_Schutzstaffel_focus
			has_war_with = SOV
			SOV = {
				surrender_progress < 0.05
			}
			 #soviet advance check
			
			#### West of Berlin ####
			OR = {
				SOV = { controls_state = 86 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 86
				}
				SOV = { controls_state = 68 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 68
				}
				SOV = { controls_state = 64 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 64
				}				
			}
			#### Danzig/Brandenburger ####
			OR = {
				SOV = { controls_state = 63 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 63
				}
				SOV = { controls_state = 85 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 85
				}				
			}
			#### Austria/Czech Area ####
			OR = {
				SOV = { controls_state = 66 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 66
				}
				SOV = { controls_state = 9 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 9
				}
				SOV = { controls_state = 4 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 4
				}				
			}
			#### South/Center Poland Area ####
			OR = {
				SOV = { controls_state = 10 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 10
				}
				SOV = { controls_state = 92 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 92
				}
				SOV = { controls_state = 90 }
				any_other_country = {
					is_in_faction_with = SOV
					controls_state = 90
				}				
			}
					
		}

		icon = generic_scorched_earth

		cost = 0

		ai_will_do = {
			factor = 100
		}	

		fire_only_once = yes

		complete_effect = {
			custom_effect_tooltip = "STEINER GAINS THE BONUS!"
			GER = {
				add_timed_idea = {
					idea = GER_steiners_counter_attack_2
					days = 30
				}
				
				every_army_leader = {
					limit = {
						has_id = 35
					}
					add_unit_leader_trait = steiners_attack
				}
			}
			BUL = {
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}	
			}
			ROM = {
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}
			}	
			HUN = {	
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}
			}	
			EFR = {	
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}
			}
			SLO = {	
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}
			}	
			SPR = {	
				add_timed_idea = {
					idea = GER_steiners_counter_attack
					days = 30
				}
			}
			hidden_effect = {
				news_event = { id = news.493 hours = 6 }
				sound_effect = sp_steiner
			}			
	 	}
	} 
	GER_capture_equipment = {
		visible = {
			NOT = {
				has_war_with = SOV
			}
		}	
		icon = generic_civil_support

		allowed = {
			original_tag = GER
		}
		complete_effect = {
			country_event = soviet.135
		}
	}
	GER_war_in_the_west = {
		visible = {
			NOT = {
				has_war_with = ENG
			}
		}	
		icon = generic_civil_support

		allowed = {
			original_tag = GER
		}
		complete_effect = {
			country_event = germany.563
		}
	}
	GER_poland_evacuation = {
		visible = {
			NOT = {
				has_war_with = POL
			}
		}	
		icon = generic_civil_support

		allowed = {
			original_tag = GER
		}
		complete_effect = {
			country_event = germany.564
		}
	}
	GER_delete_einsatzgruppen = {
		name = "Delete Einsatzgruppen"
		visible = {
			has_war_with = SOV
		}	
		icon = ger_reichskommissariats

		allowed = {
			original_tag = GER
		}
		complete_effect = {
			delete_unit_template_and_units = {
				division_template = "Einsatzgruppen"
				disband = yes 
			}
			if = {
				limit = {
					GER = {
						NOT = {
							OR = {
								has_tech = large_front_operations
								has_tech = peoples_army
							}
						}
					}
				}
				hidden_effect = {
					division_template = {
						name = "Einsatzgruppen"
						is_locked = yes
						priority = 0  
						template_counter = 82
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
								
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }						

							infantry = { x = 3 y = 0 }	

						
						}

						support = {
							DIV_HQ = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
							military_police = { x = 1 y = 0 }
							recon = { x = 1 y = 1 }
						}
					}	
				}
			}
			if = {
				limit = {
					GER = {
						OR = {
							has_tech = large_front_operations
							has_tech = peoples_army
						}
					}
				}
				hidden_effect = {
					division_template = {
						name = "Einsatzgruppen"
						is_locked = yes
						priority = 0  
						template_counter = 82
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
								
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }						

							infantry = { x = 3 y = 0 }	
							infantry = { x = 3 y = 1 }	
							infantry = { x = 3 y = 2 }	
							infantry = { x = 3 y = 3 }	

						
						}

						support = {
							DIV_HQ = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
							military_police = { x = 1 y = 0 }
							recon = { x = 1 y = 1 }
						}
					}	
				}
			}	
		}
	}
	GER_ussr_war_goal = { #barba

		icon = ger_reichskommissariats
	
		fire_only_once = yes

		available = {
			date > 1941.06.22
			is_puppet = no

			is_neighbor_of = SOV
		}

		ai_will_do = {
			factor = 1000
		}
		
		visible = {
		}

		allowed = {
		   tag = GER
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							state = 40 
							state = 404
							state = 732
							state = 742
							state = 654
							state = 590
							state = 589
							state = 581

						}
					}
					add_extra_state_shared_building_slots = 99	
				}
				every_country = {
					limit = {
						is_in_faction_with = GER
					}
					clr_country_flag = axis_africa_helper
				}
				if = {
					limit = {
						GER = {
							NOT = {
								OR = {
									has_tech = large_front_operations
									has_tech = peoples_army
								}
							}
						}
					}
					hidden_effect = {
						division_template = {
							name = "Einsatzgruppen"
							is_locked = yes
							priority = 0  
							template_counter = 82
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
								
								infantry = { x = 1 y = 0 }
								infantry = { x = 1 y = 1 }
								infantry = { x = 1 y = 2 }
									
								infantry = { x = 2 y = 0 }
								infantry = { x = 2 y = 1 }
								infantry = { x = 2 y = 2 }						

								infantry = { x = 3 y = 0 }	

							
							}

							support = {
								DIV_HQ = { x = 0 y = 0 }
								engineer = { x = 0 y = 1 }
								military_police = { x = 1 y = 0 }
								recon = { x = 1 y = 1 }
							}
						}	
					}
				}
				if = {
					limit = {
						GER = {
							OR = {
								has_tech = large_front_operations
								has_tech = peoples_army
							}
						}
					}
					hidden_effect = {
						division_template = {
							name = "Einsatzgruppen"
							is_locked = yes
							priority = 0  
							template_counter = 82
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
								
								infantry = { x = 1 y = 0 }
								infantry = { x = 1 y = 1 }
								infantry = { x = 1 y = 2 }
									
								infantry = { x = 2 y = 0 }
								infantry = { x = 2 y = 1 }
								infantry = { x = 2 y = 2 }	
								infantry = { x = 2 y = 3 }						

								infantry = { x = 3 y = 0 }	
								infantry = { x = 3 y = 1 }	
						

							
							}

							support = {
								DIV_HQ = { x = 0 y = 0 }
								engineer = { x = 0 y = 1 }
								military_police = { x = 1 y = 0 }
								recon = { x = 1 y = 1 }
							}
						}	
					}
				}
				complete_national_focus = GER_ussr_war_goal
				every_state = {
					limit = {
						has_state_flag = SOV_war_zone_flag
					}
					add_dynamic_modifier = { modifier = SOV_war_zone_modifier }
				}
				every_state = {
					limit = {
						OR = {
							has_state_flag = BAR_war_zone_flag
							has_state_flag = SOV_war_zone_flag
							has_state_flag = GER_war_zone_flag
						}
					}
					add_province_modifier = {
						static_modifiers = { SOV_barb_front }
						province = {
							all_provinces = yes
						}
					}
				}
				every_country = {
					set_variable = { var = super_event value = 9 }
				}	
				every_country = {
					limit = { 
						AND = {
							check_variable= { 
								speeches_enabled > 0
							} 
							check_variable= { 
								music_enabled < 2
							} 
						}
					}
					scoped_sound_effect = "sp_ger_barb_SS"
				}
				every_country = {
					limit = { 
						AND = {
							check_variable= { 
								music_enabled > 0
							} 
							check_variable= { 
								speeches_enabled < 2
							} 
						}
					}
					scoped_sound_effect = "se_operation_barbarossa"
				}
				every_country = {
					limit = { 
						AND = {
							check_variable= { 
								music_enabled > 0
							} 
							check_variable= { 
								speeches_enabled > 0
							} 
						}
					}
					scoped_sound_effect = "sp_ger_barb_SS"
				}
				
				GER = {
					declare_war_on = {
						target = SOV
						type = annex_everything
					}
				}	
				GER = {
					declare_war_on = {
						target = USA
						type = annex_everything
					}
				}
				ITA = { 
					add_to_war = { 
						targeted_alliance = GER 
						enemy = SOV 
					}
				}
				if = {
					limit = {
						country_exists = ROM
					}
					ROM = { 
						add_to_war = { 
							targeted_alliance = GER 
							enemy = SOV 
						}
					}
				}
				if = {
					limit = {
						country_exists = HUN
					}	
					HUN = { 
						add_to_war = { 
							targeted_alliance = GER 
							enemy = SOV 
						}
					}
				}	
				if = {
					limit = {
						country_exists = SLO
					}
					SLO = { 
						country_event = { id = slovakia.8 days = 1 }
						add_to_war = { 
						targeted_alliance = GER 
							enemy = SOV 
						}
					}
				}	
				if = {
					limit = {
						country_exists = SPR
					}
					SPR = { 
						add_to_war = { 
							targeted_alliance = GER 
							enemy = SOV 
						}
					}
				}	
				if = {
					limit = {
						country_exists = BUL
					}
					BUL = { 
						add_to_war = { 
							targeted_alliance = GER 
							enemy = SOV
						}
					}
				}	
				if = {
					limit = {
						EFR = { has_war_with = ENG } 
					}
					EFR = { 
						add_to_war = { 
							targeted_alliance = GER 
							enemy = SOV 
						}
					}
				}
			}
			if = {
				limit = {
					country_exists = MON
				}
				MON = { 
					add_to_war = { 
						targeted_alliance = SOV 
						enemy = GER
					}
				}
			}
					
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				every_army_leader = {
					add_unit_leader_trait = barbarossa_river
				}
				get_barb_offensive = yes 
			}					
			SOV = {
			
				add_ideas = Disorganized_Red_Army_1
				add_dynamic_modifier = {
					modifier = SOV_surprise_strike_dynamic
					days = 180
				}
				
			}
			hidden_effect = {	
				every_other_country = { 
					limit = { NOT = { tag = SOV } NOT = { tag = GER } } 
				}
				SOV = {
					diplomatic_relation = { country = ENG relation = non_aggression_pact }						
					diplomatic_relation = { country = FRA relation = non_aggression_pact }
					diplomatic_relation = { country = SAF relation = non_aggression_pact }
					diplomatic_relation = { country = CAN relation = non_aggression_pact }
					diplomatic_relation = { country = RAJ relation = non_aggression_pact }
					diplomatic_relation = { country = AST relation = non_aggression_pact }
					diplomatic_relation = { country = NZL relation = non_aggression_pact }
					diplomatic_relation = { country = PHI relation = non_aggression_pact }
					diplomatic_relation = { country = NOR relation = non_aggression_pact }
					diplomatic_relation = { country = SWE relation = non_aggression_pact }
					diplomatic_relation = { country = HOL relation = non_aggression_pact }
					diplomatic_relation = { country = BEL relation = non_aggression_pact }
					diplomatic_relation = { country = LUX relation = non_aggression_pact }
					diplomatic_relation = { country = YUG relation = non_aggression_pact }
					diplomatic_relation = { country = GRE relation = non_aggression_pact }
				}
			}
		}
	}
	GER_barbarossa_mission = {

		icon = generic_operation

		allowed = {
			always = no
			#added through on_action
		}

		available = {
			219 = { is_controlled_by_ROOT_or_ally = yes }
			195 = { is_controlled_by_ROOT_or_ally = yes }
			202 = { is_controlled_by_ROOT_or_ally = yes }
			217 = { is_controlled_by_ROOT_or_ally = yes }
		}

		days_mission_timeout = 120

		fire_only_once = yes

		activation = {

		}

		is_good = no

		complete_effect = {
			add_war_support = 0.05
			custom_effect_tooltip = barbarossa_mission_tt
			if = {
				limit = {
					any_army_leader = {
						has_trait = barbarossa_river
					} 
				}
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}
			}
			BUL = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			HUN = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			ROM = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			SPR = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			EFR = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			ITA = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			SLO = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
		}

		timeout_effect = {
			if = {
				limit = {
					any_army_leader = {
						has_trait = barbarossa_river
					} 
				}
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}
			}
			ITA = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			EFR = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			HUN = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			ROM = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			SPR = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			BUL = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}
			SLO = {
				if = {
					limit = {
						any_army_leader = {
							has_trait = barbarossa_river
						} 
					}
				}	
				every_army_leader = {
					remove_unit_leader_trait = barbarossa_river
				}	
			}			
		}

		ai_will_do = {
			factor = 10
		}
	}
	GER_prepare_to_invade_the_ussr = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		cost = 25 
		
		allowed = {
		   tag = GER
		}

		visible = {
			OR = {
				GER = { controls_state = 10 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 10
				}
			}
		}

		available = {	
			num_of_civilian_factories_available_for_projects > 19
			has_tech = construction3				
			OR = {
				GER = { controls_state = 73 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 73
				}
			}
			OR = {
				GER = { controls_state = 76 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 76
				}
			}
			OR = {
				GER = { controls_state = 79 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 79
				}
			}
		}

		days_remove = 120

		modifier = {
			civilian_factory_use = 20
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			custom_effect_tooltip = GER_prepare_to_invade_the_ussr_tt
			custom_effect_tooltip = GER_prepare_to_invade_the_ussr_2_tt
			hidden_effect = {												
				188 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				5 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				92 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				98 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				10 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				88 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				90 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				73 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				76 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
				79 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
						
					}
					set_building_level = {
						type = air_base
						level = 10
						instant_build = yes
						
					}
					set_building_level = {
						type = radar_station
						level = 2
						instant_build = yes		
					}
				}
			}	
		}	
	}
	GER_ostwall = {

		icon = generic_construction

		
		allowed = {
		   tag = GER
		}
		visible = {
			has_war_with = SOV
		}
		available = {
			num_of_civilian_factories_available_for_projects > 20
			has_tech = construction3
				
			OR = {
				has_full_control_of_state = 191
				has_full_control_of_state = 209
				has_full_control_of_state = 210
				has_full_control_of_state = 207
				has_full_control_of_state = 206
				has_full_control_of_state = 204
				has_full_control_of_state = 194
				has_full_control_of_state = 202
				has_full_control_of_state = 203
				has_full_control_of_state = 226
				has_full_control_of_state = 200
			}
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 100

		modifier = {
			civilian_factory_use = 20
		}

		remove_effect = {
			custom_effect_tooltip = GER_ostwall_forts
			custom_effect_tooltip = GER_ostwall_forts_2
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 191 
					}
				}
				hidden_effect = {
					191 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4640
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 209
					}
				}
				hidden_effect = {
					209 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 415
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3310
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 210 
					}
				}
				hidden_effect = {
					210 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 3333
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11259
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 9386
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 207 
					}
				}
				hidden_effect = {
					207 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 323
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11241
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11220
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3331
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 206 
					}
				}
				hidden_effect = {
					206 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9289
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3378
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 204 
					}
				}
				hidden_effect = {
					204 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 6373
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 194 
					}
				}
				hidden_effect = {
					194 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 6319
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 9249
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3507
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 202 
					}
				}
				hidden_effect = {
					202 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9568
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3543
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 525
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3494
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 203 
					}
				}
				hidden_effect = {
					203 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11454
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 488
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 3468
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 6478
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 226 
					}
				}
				hidden_effect = {
					226 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 9433
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11437
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 200 
					}
				}
				hidden_effect = {
					200 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11405
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 6596
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 11700
							instant_build = yes
						}
					}
				}
			}
		}
	}
	summer_offensive_I_decision = { 
	
		allowed = {
		   tag = GER
		}

		visible = {
			has_war_with = SOV
			AND = { date > 1942.01.01 date < 1942.08.01 }
		}

		available = {
			has_war_with = SOV
			AND = { date > 1942.06.01 date < 1942.08.01 }
		}

		icon = generic_scorched_earth

		cost = 0

		ai_will_do = {
			factor = 100
		}	

		days_remove = 120

		fire_only_once = yes

		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = SOV_war_zone_flag
				}
				add_dynamic_modifier = { modifier = SOV_war_zone_modifier }
			}
		}

		complete_effect = { 

			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				fall_blau_get_summer_offensive = yes 
			}
			
			GER = {
				activate_decision = GER_race_for_baku_oil
			}

			hidden_effect = {
				every_country = {
					limit = { 
						AND = {
							check_variable= { 
								speeches_enabled > 0
							} 
						}
					}
					scoped_sound_effect = "sp_ger_georges_song"
				}
				every_state = {
					limit = {
						has_state_flag = SOV_war_zone_flag
					}
					remove_dynamic_modifier = { modifier = SOV_war_zone_modifier }
 				}
				
			SOV = {
				activate_decision = SOV_race_for_baku_oil
			}
			}
			news_event = { hours = 20 id = news.458 }
			set_country_flag = GERsummeroffensive1
	 	}
	}
	summer_offensive_II_decision = { 
	
		allowed = {
		   tag = GER
		}

		available = {
			has_war_with = SOV
			AND = { date > 1943.06.01 date < 1943.08.01 }
		}

		visible = {
			has_war_with = SOV
			AND = { date > 1943.01.01 date < 1943.08.01 }
		}

		icon = generic_scorched_earth

		cost = 0

		ai_will_do = {
			factor = 100
		}	

		days_remove = 120

		fire_only_once = yes
		
		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = SOV_war_zone_flag
				}
				add_dynamic_modifier = { modifier = SOV_war_zone_modifier }
			}
		}

		complete_effect = { 	
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				fall_blau_get_summer_offensive = yes 
			}

			hidden_effect = {
				every_country = {
					limit = { 
						check_variable= { 
							speeches_enabled > 0
						} 
					}
					scoped_sound_effect = "sp_ger_zitadelle"
				}
				 every_state = {
					limit = {
						has_state_flag = SOV_war_zone_flag
					}
					remove_dynamic_modifier = { modifier = SOV_war_zone_modifier }
 				}

			}
			news_event = { hours = 20 id = news.458 }
			set_country_flag = GERsummeroffensive2
		}
	}
	summer_offensive_III_decision = { 
	
		allowed = {
		   tag = GER
		}

		available = {
			has_war_with = SOV
		}

		visible = {
			has_war_with = SOV
			AND = { date > 1944.06.01 date < 1944.08.01 }
		}

		icon = generic_scorched_earth

		cost = 0
		ai_will_do = {
			factor = 100
		}	

		days_remove = 120

		fire_only_once = yes
	
		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = SOV_war_zone_flag
				}
				add_dynamic_modifier = { modifier = SOV_war_zone_modifier }
			}
		}

		complete_effect = { 	
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				fall_blau_get_summer_offensive = yes 
			}

			hidden_effect = {
				every_country = {
					limit = { 
						check_variable= { 
							speeches_enabled > 0
						} 
					}
					scoped_sound_effect = "sp_ger_georges_song_3"
				}
				 every_state = {
					limit = {
						has_state_flag = SOV_war_zone_flag
					}
					remove_dynamic_modifier = { modifier = SOV_war_zone_modifier }
 				}
			}	
			news_event = { hours = 20 id = news.458 }
			set_country_flag = GERsummeroffensive3
		}
	}
	summer_offensive_IV_decision = { 
	
		allowed = {
		   tag = GER
		}

		available = {
			has_war_with = SOV
		}

		visible = {
			has_war_with = SOV
			AND = { date > 1945.06.01 date < 1945.08.01 } 
		}


		icon = generic_scorched_earth

		cost = 0
		ai_will_do = {
			factor = 100
		}	

		days_remove = 120

		fire_only_once = yes
	
		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = SOV_war_zone_flag
				}
				add_dynamic_modifier = { modifier = SOV_war_zone_modifier }
			}
		}

		complete_effect = { 	
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				fall_blau_get_summer_offensive = yes 
			}
			
			hidden_effect = {
				every_state = {
					limit = {
						has_state_flag = SOV_war_zone_flag
					}
					remove_dynamic_modifier = { modifier = SOV_war_zone_modifier }
				}
			}	
			news_event = { hours = 20 id = news.458 }
			set_country_flag = GERsummeroffensive4
		}
	}
	GER_race_for_baku_oil = {

		icon = generic_scorched_earth

		allowed = {
			tag = GER
		}

		available = {
			hidden_trigger = { date > 1942.09.01 }
			custom_trigger_tooltip = { tooltip = baku_tooltip_tt }
		}
		visible = {
			date > 1942.01.01
		}

		days_remove = 90
		fire_only_once = yes

		activation = {
		}

		is_good = no

		complete_effect = {
		}
		
		remove_effect = {
			custom_effect_tooltip = GER_race_for_baku_oil_tt
			if = {
				limit = {
					AND = {
						GER = {
							NOT = {
								controls_state = 229
							}
						}
						SOV = {
							NOT = {
								AND = {
									controls_state = 221
									controls_state = 227
									controls_state = 218
									controls_state = 234
								}
							}
						}
					}
				}
				229 = {
					add_resource = {
						type = oil
						amount = -60
					}
				}
			}	
		}

		ai_will_do = {
			factor = 1
		}
	}
}

GER_arbeitseinsatz_category = {

	GER_recruit_workers_poland = {
		icon = generic_assassination

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 90

		available = {
		}

		visible = {
			has_completed_focus = GER_polish_occupation
		}
		
		complete_effect = {

			custom_effect_tooltip = GER_get_6000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 6000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					or = {
						state = 89 
						state = 91 
						state = 93 
						state = 94 
						state = 95 
						state = 96 
						state = 784 
						state = 97 
						state = 98 
						state = 86 
						state = 87 
						state = 762
						state = 88 
					}
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}

	GER_recruit_workers_norway = {
		icon = hol_attract_foreign_investors

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 365

		available = {
		}

		visible = {
			has_completed_focus = GER_wesereberung
		}

		complete_effect = {

			custom_effect_tooltip = GER_get_8000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 8000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					OR = {
						is_core_of = NOR 
						is_core_of = DEN
					}  
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}

	GER_recruit_workers_benelux = {
		icon = GFX_decision_generic_speech

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 365

		available = {
		}

		visible = {
			has_completed_focus = GER_occupation_of_the_benelux
		}

		complete_effect = {

			custom_effect_tooltip = GER_get_8000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 8000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					OR = {
						is_core_of = HOL  
						is_core_of = LUX 
						is_core_of = BEL  
					}
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}

	GER_recruit_workers_efr = {
		icon = generic_independence

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 180

		available = {
		}

		visible = {
			has_completed_focus = GER_occupation_of_france
		}
		
		complete_effect = {

			custom_effect_tooltip = GER_get_10000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 10000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					is_core_of = FRA  
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}

	GER_recruit_workers_balkans = {
		icon = eng_trade_unions_support

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 180

		available = {
		}

		visible = {
			has_completed_focus = GER_establish_the_occupational_zones_in_yugoslavia
		}
		
		complete_effect = {

			custom_effect_tooltip = GER_get_8000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 8000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					OR = {
						is_core_of = YUG 
						is_core_of = GRE 
					}
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}

	GER_recruit_workers_USSR = {
		icon = GFX_decision_generic_arrest

		allowed = {
		   tag = GER
		}	

		cost = 35 

		days_re_enable = 90

		available = {
			SOV = {
				surrender_progress > 0.1 
			}
		}

		visible = {
			has_completed_focus = GER_ussr_war_goal
		}

		visible = {
			has_completed_focus = GER_establish_the_occupational_zones_in_yugoslavia
		}
		
		complete_effect = {

			custom_effect_tooltip = GER_get_10000_workers_tt 

			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 10000 
			}
			every_state = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
					is_core_of = SOV 
				}
  				add_resistance_target = {
                    amount = 6
                    tooltip = GER_increase_resistance_6
		    	}
			}
		}		
	}	
}

economy_decisions = {
	GER_expand_rationing_decision = {

		icon = generic_paperwork

		available = {
		}

		visible = {
			tag = GER
			has_completed_focus = GER_implement_rationing
		}

		fire_only_once = yes

		modifier = {
		}


		cost = 100

		complete_effect = {
			swap_ideas = {
				remove_idea = GER_rationing
				add_idea = GER_rationing_expanded
			}
			71 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			808 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			79 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
		}

		ai_will_do = {
			factor = 50
		}
	}	
}

GER_fanaticism_category = {
	GER_fanaticism_decision_debug = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
			is_ai = no 
		}
		activation = {
		}
		
		complete_effect = {
			set_variable = {
				var = GER_fanaticism_var
				value = 120
			}
		}		
	}
}

special_projects = {
	GER_send_rommel = {

		icon = generic_political_discourse

		available = {

			has_war = yes
			ITA = {
				is_in_faction_with = GER
				has_completed_focus = ITA_afrikakorps
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			original_tag = GER 
		}

		complete_effect = {
			GER = {
				retire_character = GER_erwin_rommel
			}	
			if = {
				limit = {
					GER = {
						has_completed_focus = GER_gott_mit_uns
					}
				}				
				ITA = {
					create_corps_commander = {
						name = "Erwin Rommel"
						picture = "Portrait_Germany_Erwin_Rommel.dds"
						traits = { trickster trait_reckless panzer_leader desert_fox expert_improviser }
						skill = 4
						attack_skill = 6
						defense_skill = 2
						planning_skill = 2
						logistics_skill = 3
					}
				}
			}
			if = {
				limit = {
					GER = {
						has_completed_focus = GER_kampfgruppes
					}
				}				
				ITA = {
					create_corps_commander = {
						name = "Erwin Rommel"
						picture = "Portrait_Germany_Erwin_Rommel.dds"
						traits = { trickster trait_reckless panzer_leader desert_fox expert_improviser }
						skill = 4
						attack_skill = 6
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}
			}
			if = {
				limit = {
					GER = {
						has_completed_focus = GER_kesselschlacht
					}
				}				
				ITA = {
					create_corps_commander = {
						name = "Erwin Rommel"
						picture = "Portrait_Germany_Erwin_Rommel.dds"
						traits = { trickster trait_reckless panzer_leader desert_fox expert_improviser }
						skill = 4
						attack_skill = 5
						defense_skill = 2
						planning_skill = 3
						logistics_skill = 3
					}
				}
			}
			else_if = {		
				limit = {
					GER = {
						NOT = {
							OR = {
								has_completed_focus = GER_kampfgruppes
								has_completed_focus = GER_gott_mit_uns
								has_completed_focus = GER_kampfgruppes
							}
						}		
					}
				}		
				ITA = { 
					create_corps_commander = {
						name = "Erwin Rommel"
						picture = "Portrait_Germany_Erwin_Rommel.dds"
						traits = { trickster trait_reckless panzer_leader desert_fox expert_improviser }
						skill = 4
						attack_skill = 5
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 3
					}	
				}
			}		
		}
	}
	GER_dismantle_maginot = {

		icon = generic_construction

		available = {
			has_war = yes
			any_country = {
				OR = {
					tag = GER
					is_in_faction_with = GER
				}
				controls_state = 28
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			original_tag = GER 
		}

		days_remove = 180

		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 2
					}
				}
			}
			
		}
		complete_effect = {
			add_timed_idea = { idea = GER_dismantle_maginot days = 180 }
		}
	}	
	GER_westwall = {

		icon = generic_construction

		allowed = {
		   tag = GER
		}
		available = {
			42 = { is_demilitarized_zone = no }
			51 = { is_demilitarized_zone = no }
			num_of_civilian_factories_available_for_projects > 2
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 70

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			custom_effect_tooltip = GER_westwall_tt
			custom_effect_tooltip = GER_westwall_2_tt
			hidden_effect = {
				50 = {
					set_building_level = {
						type = bunker
						province = 11640
						level = 5
					}
					set_building_level = {
						type = bunker
						province = 6712
						level = 5
					}
					set_building_level = {
						type = bunker
						province = 6542
						level = 5
					}
					set_building_level = {
						type = bunker
						province = 3530
						level = 5
					}
				}		
				42 = {	
					set_building_level = {
						type = bunker
						province = 3558
						level = 5
					}		
					set_building_level = {
						type = bunker
						province = 563
						level = 5
					}
					set_building_level = {
						type = bunker
						province = 11531
						level = 5
					}
					set_building_level = {
						type = bunker
						province = 9575
						level = 5
					}
				}
			}
		}
	}

	#LOL#
	GER_plan_atlantikwall = {

		icon = generic_construction

		allowed = {
		   tag = GER
		}
		available = {
			date > 1941.1.1
			num_of_civilian_factories_available_for_projects > 30
			OR = {
					GER = { controls_state = 6 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 6
				}
			}
			OR = {
					GER = { controls_state = 7 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 7
				}
			}
			OR = {
					GER = { controls_state = 36 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 36
				}
			}
			OR = {
					GER = { controls_state = 99 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 99
				}
			}
			OR = {
				OR = {
					GER = { controls_state = 142 }
						any_other_country = {
						is_in_faction_with = GER
						controls_state = 142
					}
				}
				is_in_faction_with = NOR
			}
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 5
		}

		days_remove = 180

		modifier = {
			civilian_factory_use = 30
		}

		remove_effect = {
			custom_effect_tooltip = GER_atlantikwall_tt
			custom_effect_tooltip = GER_atlantikwall_tt_2
			hidden_effect = {
				news_event = { id = news.490 }
				30 = {
					set_building_level = {
						type = bunker
						province = 11465
						level = 6
					}								
				}
				35 = {
					set_building_level = {
						type = bunker
						province = 9431
						level = 6
					}								
				}
				56 = {
					set_building_level = {
						type = bunker
						province = 241
						level = 4
					}								
				}
				6 = {
					set_building_level = {
						type = bunker
						province = 6560
						level = 6
					}								
				}
				7 = {
					set_building_level = {
						type = bunker
						province = 68
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 3314
						level = 5
					}								
				}
				29 = {
					set_building_level = {
						type = bunker
						province = 11548
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 575
						level = 4
					}								
				}
				23 = {
					set_building_level = {
						type = bunker
						province = 6657
						level = 6
					}	
					set_building_level = {
						type = bunker
						province = 9597
						level = 5
					}							
				}
				14 = {
					set_building_level = {
						type = bunker
						province = 6536
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 11508
						level = 6
					}	
					set_building_level = {
						type = bunker
						province = 3552
						level = 4
					}							
				}
				15 = {
					set_building_level = {
						type = bunker
						province = 6536
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 11508
						level = 6
					}	
					set_building_level = {
						type = bunker
						province = 6449
						level = 4
					}
					set_building_level = {
						type = bunker
						province = 6599
						level = 6
					}	
					set_building_level = {
						type = bunker
						province = 9434
						level = 4
					}	
					set_building_level = {
						type = bunker
						province = 485
						level = 5
					}					
				}
				19 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 9737
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11565
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6621
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6777
						level = 6
					}					
				}
				23 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 6657
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9597
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11600
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9710
						level = 6
					}	
					set_building_level = {
						type = coastal_bunker
						province = 743
						level = 6
					}					
				}
				30 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {	
						type = coastal_bunker
						province = 11465
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11616
						level = 6
					}
				}
				14 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 9510
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6536
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 542
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3552
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6572
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9525
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11508
						level = 6
					}
				}
				15 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 9550
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6449
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3579
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11535
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6599
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9434
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 485
						level = 6
					}
				}
				29 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 11420
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9500
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11548
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 575
						level = 6
					}
				}
				6 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 6446
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6560
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6598
						level = 6
					}					
				}
				7 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 480
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9431
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9498
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3211
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 68
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3314
						level = 6
					}
				}
				36 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 6336
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9335
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11318
						level = 6
					}
				}
				56 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 11360
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 241
						level = 6
					}
				}
				59 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 374
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6349
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3326
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6325
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 9347
						level = 6
					}					
				}
				58 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 3368
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3231
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11366
						level = 6
					}
				}
				99 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 332
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 399
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3206
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 316
						level = 6
					}
				}
				142 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 9296
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 11367
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6176
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 53
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 122
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 199
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3090
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 188
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 137
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3192
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 65
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 6145
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3114
						level = 6
					}
					set_building_level = {
						type = coastal_bunker
						province = 3188
						level = 6
					}					
				}
				144 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 192
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 9116
						level = 6
					}
					set_building_level = {
						type = bunker
						province = 11050
						level = 6
					}					
				}
				143 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}				
					set_building_level = {
						type = coastal_bunker
						province = 3022
						level = 6
					}
				}
				785 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}
				}				
				35 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}
				}
				24 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}
				}
				34 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}
				}
				110 = {
					set_building_level = {
						type = anti_air_building
						level = 3
						instant_build = yes 
					}
				}
			}
		}
	}

	GER_deploy_american_welcome_party = {
		icon = GFX_decision_deploy
		ai_will_do = { factor = 10 }
		cost = 0

		visible = {
		}

		available = {
			date > 1941.1.1
			OR = {
					GER = { controls_state = 6 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 6
				}
			}
			OR = {
					GER = { controls_state = 7 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 7
				}
			}
			OR = {
					GER = { controls_state = 36 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 36
				}
			}
			OR = {
					GER = { controls_state = 99 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 99
				}
			}
			OR = {
					GER = { controls_state = 59 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 59
				}
			}
			OR = {
					GER = { controls_state = 56 }
					any_other_country = {
					is_in_faction_with = GER
					controls_state = 56
				}
			}
		}

		allowed = {
			original_tag = GER		
		}

		fire_only_once = yes

		complete_effect = {
			hidden_effect = {
				GER = {
					country_event = { id = germany.700 days = 1 }
				}
			}
			custom_effect_tooltip = "Spawns 150 Garrison Divisions"
			if = { limit = { is_ai = no }
				add_manpower = -1000000
			}
			ROOT = {
				add_equipment_to_stockpile = {
					amount = 400
					type = train_equipment_3
				}
			}
		}

		days_remove = 180

		modifier = {
			industrial_capacity_factory = -0.15
		}


	}

	GER_flak_towers = {

		icon = generic_construction

		available = {
			has_war = yes
			has_tech = construction4
			controls_state = 64
		}

		cost = 25
		fire_only_once = yes

		ai_will_do = {
			factor = 50
		}

		visible = {
			original_tag = GER
			has_war = yes
		}

		days_remove = 200

		modifier = {
			civilian_factory_use = 8
		}
		remove_effect = {
			set_country_flag = GER_flakturm_authorized
			if = {
				limit = {
					GER = { has_full_control_of_state = 64 }
				}
				64 = { #Berlin
					set_building_level = {
						type = anti_air_building
						level = 8
					}					
				}
			}
			if = {
				limit = {
					GER = { has_full_control_of_state = 4 }
				}			
				4 = { #Vienna
					set_building_level = {
						type = anti_air_building
						level = 8
					}					
				}
			}
			if = {
				limit = {
					GER = { has_full_control_of_state = 58 }
				}			
				58 = { #Hamburg
					set_building_level = {
						type = anti_air_building
						level = 8
					}					
				}
			}
			if = {
				limit = {
					GER = { has_full_control_of_state = 50 }
				}			
				50 = { #Stuttgart
					set_building_level = {
						type = anti_air_building
						level = 7
					}					
				}
			}
			if = {
				limit = {
					GER = { has_full_control_of_state = 55 }
				}			
				55 = { #FrankFurt
					set_building_level = {
						type = anti_air_building
						level = 7
					}					
				}
			}
		}
		complete_effect = {
		}
	}	
}

operations = {
	GER_annex_hun = {
		
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag = GER
		}

		visible = {
			HUN = {
				is_ai = yes	
			}	
		}
		available = {
			HUN = {
				is_ai = yes	
			}	
		}
		ai_will_do = {
			factor = -100
		}
		complete_effect = {
			annex_country = {
				target = HUN
   			 	transfer_troops = yes
			}
			every_state = {
				limit = {
					is_core_of = HUN
					
				}
				set_compliance = 90
			}
		}
	}
	GER_annex_ita = {
		
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag = GER
		}

		visible = {
			ITA = {
				is_ai = yes	
			}	
			AND = {
				date > 1939.08.01
			}
		}
		available = {
			ITA = {
				is_ai = yes	
			}	
		}
		ai_will_do = {
			factor = -100
		}
		complete_effect = {
			annex_country = {
				target = ITA
   			 	transfer_troops = yes
			}
			every_state = {
				limit = {
					is_core_of = ITA
					
				}
				set_compliance = 90
			}
		}
	}
	GER_africa_korps = {
		
		cost = 25
		
		
		allowed = {
		   tag = GER
		}
		
		available = {
			has_war_with = ENG
			country_exists = EFR
			ITA = { has_full_control_of_state = 448 }
		}

		visible = {
			has_war_with = ENG
			ITA = { has_war_with = ENG }
			ITA = { has_full_control_of_state = 448 }
			
		}
		
		fire_only_once = yes

		
		days_remove = 30

		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			if = {
				limit = {
					ITA = {
						NOT = {
							controls_state = 450
							controls_state = 451
						}	
					}
				}
				every_country = {
					limit = {
						OR = {
							is_in_faction_with = GER
							tag = EFR
							tag = GER
						}
					}
					add_ideas = GER_afrika_campaign
				}
			}
			else_if = {
				every_country = {
					limit = {
						OR = {
							is_in_faction_with = GER
							tag = EFR
							tag = GER
						}
					}
					add_ideas = GER_afrika_campaign
				}
			}
			custom_effect_tooltip = GER_afrikakorps_tt
			hidden_effect = {
				GER = {
					country_event = germany.233
				}
			}
		}
	}

	GER_operation_oak = {
		
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag = GER
		}

		available = {
			ITA = { 
				has_idea = SAl_italian_civil_war 
				has_country_leader = {
					name = "Chaos and Confusion"
					ruling_only = yes
				}
			}		
		}
		cost = 10
		ai_will_do = {
			factor = 100
		}
		days_remove = 30

		remove_effect = {
			ITA = { country_event = salo.4 }
		}
	}

	GER_rape_italia = {
		
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag = GER
		}
		visible = {
			ITA = { has_idea = SAl_italian_civil_war }
		}
		available = {
			ITA = { has_idea = SAl_italian_civil_war }
			ITA = { is_puppet_of = GER }
			ITA = { controls_state = 159 }
			ITA = { controls_state = 158 }
		}
		cost = 50

		ai_will_do = {
			factor = 100
		}

		days_remove = 30

		remove_effect = {
			159 = { #Milano
					remove_building = {
						type = arms_factory
						level = 10
					}
					remove_building = {
						type = industrial_complex
						level = 10
					}
				}
				158 = { #Torino
					remove_building = {
						type = arms_factory
						level = 5
					}
					remove_building = {
						type = industrial_complex
						level = 5
					}
				}
				65 = { 
				add_extra_state_shared_building_slots = 10
				add_building_construction = {
						type = arms_factory
						level = 5
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 5
						instant_build = yes
					}
				}	
				54 = { 
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
						type = arms_factory
						level = 10
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 10
						instant_build = yes
					}
				}					
		}
	}	
}	

GER_case_anton_category = {

	GER_case_anton = {

		icon = generic_operation

		available = {
			has_government = fascism
			country_exists = EFR
			date > 1941.1.1
			USA = { has_war = yes }
			EFR = {	is_ai = yes }
			OR = {
				ROOT = {
					controls_state = 16 
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 16
				}							
			}
		}

		cost = 25
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				ITA = { has_capitulated = yes }
			}
		}
		days_remove = 1
		remove_effect = {
			every_state = {
				limit = {
					has_state_flag = ENG_thats_my_territory
				}
				ENG = {
					transfer_state = PREV
				}
			}

		}
		complete_effect = {
			every_state = {
				limit = {
					AND = {
						OR = {
							state = 665
							state = 458
							state = 460
							state = 513
							state = 459
							state = 461
							state = 462
							state = 677
							state = 680
							state = 554
							state = 553
						}
						NOT = {
							OR = {
								is_controlled_by = GER
								is_controlled_by = ITA
								is_controlled_by = EFR
								is_controlled_by = HUN
								is_controlled_by = ROM
								is_controlled_by = SPR
								is_controlled_by = BUL
								is_controlled_by = SLO

							}
						}
					}
				}
				set_state_flag = ENG_thats_my_territory  
			}
			GER = {
				set_autonomy = { target = EFR autonomy_state = autonomy_reichsprotectorate }
				transfer_state = 26
				transfer_state = 21
				transfer_state = 22
				transfer_state = 31
				transfer_state = 25
				transfer_state = 20
				transfer_state = 32
				transfer_state = 33
				transfer_state = 735
			}
			ITA = {
				transfer_state = 1
				transfer_state = 735
				transfer_state = 21
				transfer_state = 32

			}
			every_state = {
				limit = {
					AND = {
						is_core_of = EFR
						is_controlled_by = GER
					}
				}
				set_resistance = 5
				set_compliance = 40
			}
			EFR = {
			  set_capital = { state = 459}
			  add_state_core = 459
			}
			EFR = { remove_ideas = { idea_EFR_neutrality } }
			GER = { add_to_faction = EFR }
			
			
			
		}
	}
}

foreign_politics = {
	GER_form_greater_german_reich = {

		icon = generic_form_nation

		fire_only_once = yes

		allowed = {
			original_tag = GER
		}

		available = {
			OR = {
				controls_state = 195
				controls_state = 217
				controls_state = 219
			}
		}

		visible = {
			has_war = yes
		}

		complete_effect = {
			set_cosmetic_tag = GER_greater_german_reich
			set_province_name = { id = 6521 name = "Germania" }
			add_political_power = 10
			hidden_effect = {
				every_country = {limit = { check_variable= { speeches_enabled > 0}  }
					scoped_sound_effect = "sp_greater_german_reich"
				}
			}
			
		}	

		ai_will_do = {
			factor = 0
		}
	}

	GER_rhineland = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}	
		available = {
			42 = { is_demilitarized_zone = no }
			51 = { is_demilitarized_zone = no }
		}
		is_good = yes
		
		activation = {
			date > 1936.01.01
		}
		
		days_mission_timeout = 70
		
		selectable_mission = no
		timeout_effect = {
			42 = { set_demilitarized_zone = no }
			51 = { set_demilitarized_zone = no }
			add_political_power = 200
			army_experience = 10
			add_named_threat = { threat = 3 name = GER_rhineland }
			FRA = { country_event = { id = germany.60 } }	
			hidden_effect = {
				complete_national_focus = GER_rhineland	
			}
		}		
	}
	
	GER_anschluss = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		ai_will_do = {
			factor = 10
		}
	
		allowed = {
		   tag = GER
		}
		available = {
			42 = { is_demilitarized_zone = no }
			51 = { is_demilitarized_zone = no }
			is_puppet = no
			date > 1937.7.1 
	
			#if = {
			#	limit = {
			#		GER = {	is_ai = yes }
			#	}
			#	date > 1938.4.1	  
			#}
			NOT = { has_idea = rhineland_challenge_met }
		}

		days_remove = 70

		remove_effect = {
			hidden_effect = {
				complete_national_focus = GER_anschluss
				FRA = {
					complete_national_focus = FRA_protest_anschluss	
					if = {
						limit = {
							AND = {
								has_completed_focus = FRA_the_war_at_our_border
								has_completed_focus = FRA_rally_behind_the_popular_front	
							}	
						}
						retire_country_leader = yes
						create_country_leader = {
							name = "Léon Blum"
							desc = "POLITICS_ÉDOUARD_DALADIER_DESC"
							picture = "r56_portrait_FRA_Leon_Blum.dds"
							expire = "1965.1.1"
							ideology = socialism
							id = 670
							traits = {
							}
						}	
					}	
				}
			}
			
			add_political_power = 100
			if = {
				limit = {
					country_exists = AUS
					AUS = {
						has_civil_war = no
						OR = {
							owns_state = 4
							owns_state = 152
							owns_state = 153
						}
					}
				}
				AUS = {
					country_event = germany.28
				}				
			}
			if = {
				limit = {
					any_other_country = {
						original_tag = AUS
						has_civil_war = yes
						OR = {
							owns_state = 4
							owns_state = 152
							owns_state = 153
						}
					}
				}
				custom_effect_tooltip = germany.126.warning
				random_other_country = {
					limit = {
						original_tag = AUS
						OR = {
							has_government = fascism
							AND = {
								has_government = neutrality
								NOT = {
									any_other_country = {
										original_tag = AUS
										has_government = fascism
									}
								}
							}
							NOT = {
								any_other_country = {
									original_tag = AUS
									OR = {
										has_government = fascism
										has_government = neutrality
									}
								}
							}							
						}
					}
					country_event = { id = germany.126 days = 1 }
				}
				# REVISIT Add Czech claims, possibly
			}
			if = {
				limit = {
					4 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 4
			}
			if = {
				limit = {
					152 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 152
			}
			if = {
				limit = {
					153 = {
						owner = {
							NOT = {
								tag = AUS
							}
							NOT = {
								is_in_faction_with = ROOT
							}
						}
					}
				}
				add_state_core = 153
			}
		}
	}

	GER_demand_sudetenland = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}

		days_remove = 70

		available = {
			owns_state = 4
			is_puppet = no
			
			date > 1938.1.1	
			#if = {
			#	limit = {
			#		GER = {	is_ai = yes }
			#	}
			#	date > 1938.9.10 
			#}		
			NOT = {
				AND = {
					CZE = { is_in_faction_with = GER }
					has_war = yes
				}
			}
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			hidden_effect = {
				complete_national_focus = GER_demand_sudetenland
				every_country = {limit = { check_variable= { speeches_enabled > 0}  }
					scoped_sound_effect = "sp_ger_sudeten"
				}
			
				FRA = {
					complete_national_focus = FRA_sudetenland_question
				}
			}

			if = {
				limit = {
					OR = {
						ENG = { exists = no }
						ENG = {
							is_subject = yes
						}
						has_war_with = ENG
						has_war_with = FRA
						AND = {
							CZE = { is_subject = yes }
							OR = {
								CZE = { 
									NOT = {
										is_puppet_of = HUN
									}
								}
								NOT = { has_dlc = "Death or Dishonor" }
							}
						}
						CZE = { has_war_with = ENG }
						CZE = { has_war_with = FRA }
						CZE = { is_in_faction_with = GER }
					}
					CZE = { controls_state = 69 }
				}
				if = {
					limit = {
						CZE = { is_subject = no }
					}
					CZE = {
						country_event = { id = germany.122 }
					}
					else = {
						CZE = {
							OVERLORD = { country_event = { id = germany.122 } }
						}
					}
				}
			}
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
					CZE = { NOT = { is_in_faction_with = GER } } #in case AH is in faction with GER and dragged a subject CZE along.
					country_exists = HUN
					OR = {
						69 = { is_owned_by = HUN } #AH restored
						AND = {
							CZE = { is_subject_of = HUN }
							69 = { is_owned_by = CZE }
						}
					}
				}
				HUN = {
					country_event = germany.122
				}
			}
			if = {
				limit = {
					
					ENG = { exists = yes }
					ENG = { is_subject = no }
					NOT = { has_war_with = ENG }
					NOT = { has_war_with = FRA }
					CZE = { is_subject = no }
					CZE = { NOT = { is_in_faction_with = GER } }
					CZE = { NOT = { has_war_with = ENG } }
					CZE = { controls_state = 69 }
					
				}
				ENG = {
					country_event = germany.40
				}
				add_named_threat = { threat = 3 name = GER_demand_sudetenland_threat }
			}
			69 = {
				add_claim_by = GER
			}
			if = {
				limit = {
					NOT = { CZE = { controls_state = 69 } }
					NOT = {
						69 = { is_controlled_by = HUN }
					}
					69 = {
						controller = {
							NOT = { is_in_faction_with = GER }
						}
					}
				}
				add_named_threat = { threat = 3 name = GER_demand_sudetenland_threat }
				69 = {
					controller = {
						GER = {
							create_wargoal = {
								type = take_state_focus
								target = PREV
								generator = { 69 }
							}
						}
					}
				}
			}
		}
	}

	GER_first_vienna_award = {
		icon = ger_reichskommissariats
		fire_only_once = yes
			
		allowed = {
		   tag = GER
		}
	
		available = {
			is_puppet = no
			owns_state = 69
			country_exists = HUN
			NOT = { has_war_with = HUN }
		}

		days_remove = 15

		ai_will_do = {
			factor = 10
		}

		remove_effect = {

			hidden_effect = {
				complete_national_focus = GER_first_vienna_award	
			}


			add_political_power = 100
			HUN = {
				country_event = { id = germany.51 }
				add_opinion_modifier = { target = GER modifier = GER_first_vienna_award_GER }
			}
			if = {
				limit = {
					POL = {
						has_completed_focus = POL_embrace_dmowskis_thought
					}
				}
				POL = { 
					country_event = { id = germany.1002 }
				}
			}
			every_other_country = {
				limit = { 
					is_faction_leader = yes
					NOT = { tag = GER }
				}
				reverse_add_opinion_modifier = { target = HUN modifier = GER_second_vienna_award_other }
			}
		}
	}

	GER_end_of_czechoslovakia = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		

		days_remove = 70

		available = { 
			owns_state = 69
			is_puppet = no
			or = {
				CZE = { is_puppet_of = GER }
				CZE = { is_in_faction_with = GER }
			
				date > 1938.1.1
			}
			#if = {
			#	limit = {
			#		GER = {	is_ai = yes }
			#	}
			#	date > 1939.3.10 
			#}
			NOT = { has_war_with = CZE }
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			hidden_effect = {
				complete_national_focus = GER_end_of_czechoslovakia
				FRA = {
					complete_national_focus = FRA_czech_fate
				}
			}
			
			if = {
				limit = { 
					country_exists = CZE 
					CZE = {
						NOT = {
							is_subject_of = HUN
						}
					}
				}
				set_global_flag = end_of_czechoslovakia
				GER = { country_event = germany.55 }
			}
			if = {
				limit = { 
					OR = {
						CZE = {
							is_subject_of = HUN
						}
						HUN = {
							owns_state = 9#Prague - AH annexed CZE
						}
					}
				}
				add_state_claim = 9
				add_state_claim = 75
			}
			if = {
				limit = { NOT = { country_exists = CZE } }
				country_event = { id = germany.55 hours = 6 }
			}
			add_named_threat = { threat = 5 name = GER_end_of_czechoslovakia }
			country_event = { days = 7 id = germany.2280 }
		}
	}

	GER_second_vienna_award = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		
		allowed = {
		   tag = GER
		}
		
		days_remove = 15

		available = {
			is_puppet = no
			
			has_capitulated = no
			has_country_flag = GER_the_end_of_czechoslovakia
			country_exists = HUN
			NOT = { has_war_with = HUN }
			NOT = { has_war_with = ROM }
			date > 1939.9.1
		}

		ai_will_do = {
			factor = 10
		}

		remove_effect = {
			hidden_effect = {
				complete_national_focus = GER_second_vienna_award
			}

			add_political_power = 100
			if = {
				limit = {
					HUN = {
						is_friend_or_potential_friend_of_GER = yes
					}
					ROM = {
						controls_state = 76
						NOT = { has_war_with = HUN }
					}
				}
				country_event = { id = germany.20 }
			}
		}
	}



	GER_demand_memel = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		
		available = {
			is_puppet = no
			
			has_capitulated = no
			has_country_flag = GER_the_end_of_czechoslovakia
		}

		ai_will_do = {
			factor = 10
		}

		days_remove = 35

		remove_effect = {

			hidden_effect = {
				complete_national_focus = GER_demand_memel
			}


			188 = { add_core_of = GER }
			86 = { add_claim_by = GER }
			add_named_threat = { threat = 3 name = GER_demand_memel_threat }
			if = {
				limit = {
					LAT = { owns_state = 188 }
				}
				LAT = {
					country_event = { id = baltic.4 }
				}
			}
		}
	}

	GER_danzig_or_war = {
		icon = ger_reichskommissariats
		fire_only_once = yes
	
		allowed = {
		   tag = GER
		}
		
		available = {	
			SOV = {
				OR = {
					has_idea = SOV_molotov_ribbentrop_pact
					has_idea = SOV_molotov_ribbentrop_pact_2
				}
				
			}
			has_capitulated = no
			
			if = {
				limit = {
					OR = {
						GER = {	is_ai = yes }
						GER = {
							has_completed_focus = GER_continue_the_new_plan
						}
					}
				}
				date > 1939.9.1 
			}
			date > 1939.7.1		 
			has_country_flag = GER_the_end_of_czechoslovakia
		}
	
		ai_will_do = {
			factor = 500
		}

		complete_effect = {
			if = {
				limit = {
					GER = {
						has_idea = GER_steel_barons_empowered
					}
				}
				swap_ideas = {
					remove_idea = GER_steel_barons_empowered
					add_idea = GER_steel_barons_empowered2
				}
			}
			if = {
				limit = {
					NOT = {
						has_idea = GER_steel_barons_empowered
						has_completed_focus = GER_four_year_plan
					}
				}
				custom_effect_tooltip = GER_extra_danzig_output_tt
			}
			
			hidden_effect = {
				
				ITA = {
					set_country_flag = ita_keep_in_fuel_system_flag
					add_to_array = { GER.faction_members_array = THIS.id }
				}
				
				
				USA = {
					set_country_flag = usa_keep_in_fuel_system_flag
					add_to_array = { ENG.faction_members_array = THIS.id }
				}

				
				
				
				GER = {
					country_event = { id = germany.320 days = 7 }
					if = {
						limit = {
							GER = {
								has_idea = general_staff0
							}
						}
						swap_ideas = {
							remove_idea = general_staff0
							add_idea = general_staff1
						}
					}	
				}
				complete_national_focus = GER_danzig_or_war
				FRA = {
					complete_national_focus = FRA_die_for_danzig
				}
				POL = {
					add_dynamic_modifier = {
						modifier = POL_wodzu_prowadz
					}
				}
				news_event = { hours = 1 id = news.204 }
			}		
			add_named_threat = { threat = 15 name = GER_danzig_or_war }
			GER = {
				country_event = { id = germany.88 }
			}
			
								
		}
	}

	GER_weserubung = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		
		allowed = {
		   tag = GER
		}
		visible = {
			#has_war = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = GER_weserubung_tt
				OR = {
					has_country_flag = GER_myownplan_flags
					AND = {
						has_country_flag = GER_falkenhorst_flag
						OR = {
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 1
									state = 59
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 9
									state = 59
								}
								num_divisions_in_states = {
									count < 6
									states = { 59 }
								}
							}
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 2
									state = 59
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 19
									state = 59
								}
								num_divisions_in_states = {
									count < 11
									states = { 59 }
								}
							}
							num_divisions_in_states = {
								count < 1
								states = { 59 }
							}
						}
						OR = {
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 1
									state = 56
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 9
									state = 56
								}
								num_divisions_in_states = {
									count < 6
									states = { 56 }
								}
							}
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 2
									state = 56
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 19
									state = 56
								}
								num_divisions_in_states = {
									count < 11
									states = { 56 }
								}
							}
							num_divisions_in_states = {
								count < 1
								states = { 56 }
							}
						}
						OR = {
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 1
									state = 62
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 9
									state = 62
								}
								num_divisions_in_states = {
									count < 6
									states = { 62 }
								}
							}
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 2
									state = 62
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 19
									state = 62
								}
								num_divisions_in_states = {
									count < 11
									states = { 62 }
								}
							}
							num_divisions_in_states = {
								count < 1
								states = { 62 }
							}
						}
						OR = {
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 1
									state = 61
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 9
									state = 61
								}
								
								num_divisions_in_states = {
									count < 6
									states = { 61 }
								}
							}
							AND = {
								ships_in_state_ports = {
									type = capital_ship
									size > 2
									state = 61
								}
								ships_in_state_ports = {
									type = screen_ship
									size > 19
									state = 61
								}
								num_divisions_in_states = {
									count < 11
									states = { 61 }
								}
							}
							num_divisions_in_states = {
								count < 1
								states = { 61 }
							}
						
						}
					
					}
				}
			}
				
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			
			hidden_effect = {
				complete_national_focus = GER_weserubung
			}
			if = {
				limit = {
					has_country_flag = GER_falkenhorst_flag
				}
				
				ENG = {
					country_event = { id = britain.48 days = 4 }
				}
				ENG = { add_to_faction = DEN }
				DEN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = GER
					}
				}
				GER = {
					set_state_controller = 819
					set_state_owner = 819
					hidden_effect = {
						division_template = {
							name = "Gebirsjäger"		
							division_names_group = GER_MNT_01 
							regiments = {
								mountaineers = { x = 0 y = 0 }	
								mountaineers = { x = 0 y = 1 }
								mountaineers = { x = 0 y = 2 }
								
								mountaineers = { x = 1 y = 0 }
								mountaineers = { x = 1 y = 1 }
								mountaineers = { x = 1 y = 2 }	
								
								mountaineers = { x = 2 y = 0 }	
								mountaineers = { x = 2 y = 1 }	
								mountaineers = { x = 2 y = 2 }	
								
								pack_artillery_brigade = { x = 3 y = 0 }
								pack_artillery_brigade = { x = 3 y = 1 }	
								pack_artillery_brigade = { x = 3 y = 2 }
								pack_artillery_brigade = { x = 3 y = 3 }

								pack_artillery_brigade = { x = 4 y = 0 }
								pack_artillery_brigade = { x = 4 y = 1 }	
							}
							support = {
								DIV_HQ = { x = 0 y = 0 } 
								engineer = { x = 0 y = 1 } 		
								recon = { x = 0 y = 2 }
								pack_artillery = { x = 0 y = 3 }
								logistics_company = { x = 1 y = 0 }
								anti_air_company = { x = 1 y = 1 }
								field_gun_support = { x = 1 y = 2 }
							}

							priority = 2
						}
						819 = {
							create_unit = {
								division = "division_template = \"Gebirsjäger\" start_experience_factor = 0.6" 
								owner = GER
								allow_spawning_on_enemy_provs = yes
								count = 2
							}
						}
					}
				}
				139 = {
					teleport_armies = {
						limit =  {
							tag = GER
						}
						
						to_state = 110
					}
				}
				if = { 
					limit = {
						num_divisions_in_states = {
							count > 0
							states = { 59 }
						}
					}
					GER = {
						set_state_owner = 817
						set_state_controller = 817
					}
					
					59 = {
					
						teleport_armies = {
							limit =  {
								tag = GER
							}
							
							to_state = 817
						}
					}
						
				}
				if = { 
					limit = {
						num_divisions_in_states = {
							count > 0
							states = { 56 }
						}
					}
					GER = {
						set_state_owner = 814	
						set_state_controller = 814
					
					}
					
					56 = {
						teleport_armies = {
							limit =  {
								tag = GER
							}
							to_state = 814
						}
					}
				}
				
				
				if = { 
					limit = {
						num_divisions_in_states = {
							count > 0
							states = { 62 }
						}
					}
					GER = {
						set_state_owner = 815	
						set_state_controller = 815
					}
					62 = {
						teleport_armies = {
							limit =  {
								tag = GER
							}
							to_state = 815
						}
					}
					
				}
				
				if = { 
					limit = {
						num_divisions_in_states = {
							count > 0
							states = { 61 }
						}
					}
					GER = {
						set_state_owner = 816
						set_state_controller = 816	
					}
					61 = {
						teleport_armies = {
							limit =  {
								tag = GER
							}
							to_state = 816
						}
					}
					
				}
				
			}
			else = {
				NOR = { 
					remove_ideas = developing_country 
					remove_ideas = NOR_cant_justify

				}
				DEN = {
					remove_ideas = NOR_cant_justify
				}
				NOR = {
					load_oob = "NOR_defense"
				}
				ENG = { add_to_faction = DEN }
				DEN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = GER
					}
				}
				every_country = {
					limit = {
						OR = {
							tag = GER
							tag = BUL
							tag = ROM
							tag = HUN
							tag = EFR
							tag = SLO
						}
					}
					create_wargoal = {
						type = annex_everything
						target = NOR
					}
				}
				if = {
					limit = {
						SPR = {
							is_in_faction_with = GER
						}
					}
					SPR = {
						create_wargoal = {
							type = annex_everything
							target = NOR
						}
					}	
				}
				
				hidden_effect = {
					news_event = { hours = 6 id = news.233 }
					division_template = {
						name = "Gebirsjäger"		
						division_names_group = GER_MNT_01 
						regiments = {
							mountaineers = { x = 0 y = 0 }	
							mountaineers = { x = 0 y = 1 }
							mountaineers = { x = 0 y = 2 }
							
							mountaineers = { x = 1 y = 0 }
							mountaineers = { x = 1 y = 1 }
							mountaineers = { x = 1 y = 2 }	
							
							mountaineers = { x = 2 y = 0 }	
							mountaineers = { x = 2 y = 1 }	
							mountaineers = { x = 2 y = 2 }	
							
							pack_artillery_brigade = { x = 3 y = 0 }
							pack_artillery_brigade = { x = 3 y = 1 }	
							pack_artillery_brigade = { x = 3 y = 2 }
							pack_artillery_brigade = { x = 3 y = 3 }

							pack_artillery_brigade = { x = 4 y = 0 }
							pack_artillery_brigade = { x = 4 y = 1 }	
						}
						support = {
							DIV_HQ = { x = 0 y = 0 } 
							engineer = { x = 0 y = 1 } 		
							recon = { x = 0 y = 2 }
							pack_artillery = { x = 0 y = 3 }
							logistics_company = { x = 1 y = 0 }
							anti_air_company = { x = 1 y = 1 }
							field_gun_support = { x = 1 y = 2 }
						}

						priority = 2
					}
					58 = {
						create_unit = {
							division = "division_template = \"Gebirsjäger\" start_experience_factor = 0.6" 
							owner = GER
							allow_spawning_on_enemy_provs = yes
							count = 2
						}
					}
				}
			}
				
		}
	}

	GER_sweden_treaty = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			NOT = { has_war_with = SWE }
			has_war = yes			
		}

		available = {
			NOT = { has_war_with = SWE }
			SWE = {
				custom_trigger_tooltip = {
					tooltip = GER_alone_or_peace_faction_tt
					is_alone_or_in_faction_at_peace_with_GER = yes
				}
			} 
			DEN = { 
				NOT = {
					controls_state = 37
				}
			}		
			NOR = { 
				NOT = {
					controls_state = 110
				}
			}
		}				

		ai_will_do = {
			factor = 10
		}
		cost = 10
		complete_effect = {
			SWE = { 
			country_event = { id = germany.322 }
			custom_effect_tooltip = needs_approval
			}
		}
	}

	GER_finland_access = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			FIN = { has_completed_focus	 = FIN_abandoned }		
		}

		available = {
			FIN = { has_completed_focus	 = FIN_abandoned }
			date > 1941.1.1
		}

		ai_will_do = {
			factor = 10
		}
		cost = 10
		complete_effect = {
			FIN = { give_military_access = GER }
		}
	}

	GER_around_maginot = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
            OR = {
				POL = { has_capitulated = yes }
				POL = {
					exists = no
				}
			}
			OR = { 
				has_war_with = ENG
				NOT = { country_exists = ENG }
			}
			if = {
				limit = {
					GER = {	is_ai = yes }
				}
				#date > 1940.5.15
				date > 1939.10.18
			}					
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			hidden_effect = {
				ITA = {
					remove_ideas = italy_no_africa_first
				}
			}
			#custom_effect_tooltip = GER_Around_maginot_tt
			add_ideas = GER_blitzkrieg
			add_to_faction = ITA
			hidden_effect = {
				complete_national_focus = GER_around_maginot
				if = {
					limit = {
						AND= { 
							#ITA = {
								#is_ai = no
						  #  }
							GER = {
								is_ai = no
							}
						}	
					}
					if = {
						limit = {
							ITA = {
								NOT = {
									has_completed_focus = ITA_by_blood_alone
								}
							}
						}
						ITA = {
							complete_national_focus = ITA_by_blood_alone
							set_country_flag = { flag = ITA_operation_compass value = 1 days = 120}
						}
					}
					
				}
				FRA = {
					complete_national_focus = FRA_help_the_low_countries
					
				}
			}

			BEL = { remove_ideas = neutrality_idea }
			HOL = { remove_ideas = HOL_aloof_neutrality }
			LUX = { remove_ideas = neutrality_idea }
			if = { 
				limit = { 
					NOT = { BEL = { is_in_faction_with = GER } }
					is_ai = no
				}
				ENG = { add_to_faction = BEL }
			}
			if = {
				limit = {
					NOT = { HOL = { is_in_faction_with = GER } }
					is_ai = no
				}
				ENG = { add_to_faction = HOL }
			}
			if = {
				limit = {
					NOT = { LUX = { is_in_faction_with = GER } }
					is_ai = no
				}
				ENG = { add_to_faction = LUX }	
			}
			BEL = { 
				add_to_war = { 
					targeted_alliance = ENG
					enemy = GER
				}
			}
			HOL = { 
				add_to_war = { 
					targeted_alliance = ENG
					enemy = GER
				}
			}
			LUX = { 
				add_to_war = { 
					targeted_alliance = ENG
					enemy = GER
				}
			}
			 
			hidden_effect = {
				news_event = { hours = 6 id = news.234 }
			}
		}
	}

	GER_mol_rib_pact = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
	
		available = {
			NOT = { is_in_faction_with = POL }
			is_puppet = no
			
			date > 1939.4.1	 
			if = {
				limit = {
					GER = {	is_ai = yes }
				}
				date > 1939.8.15
			}				
			SOV = {
				NOT = { has_war_with = GER }
				country_exists = SOV
			}
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			hidden_effect = {
				complete_national_focus = GER_mol_rib_pact
				SOV = {
					complete_national_focus = SOV_molotov_ribbentrop_pact
				}
			}
			SOV = {
				country_event = { id = germany.11 days = 1 }
				custom_effect_tooltip = GER_mol_rib_pact_tt
				custom_effect_tooltip = needs_approval			
			}
		}
	}

	GER_seize_irans_oil = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
	
		available = {
			is_puppet = no 
			has_war = yes
			GER = {
				country_exists = PER
			}		
			OR = {
				GER = {
					controls_state = 455
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 455
				}
			}
		}
		
		visible = {	
			has_war = yes			
		}		

		complete_effect = {
			PER = { give_resource_rights = { receiver = GER state = 413 } }
			PER = { give_resource_rights = { receiver = GER state = 412 } }
			PER = { give_resource_rights = { receiver = GER state = 411 } }
		}

		ai_will_do = {
			factor = 500
		}
	}

	GER_seize_iraqs_oil = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
	
		available = {
			is_puppet = no 
			has_war = yes
			IRQ = {
				NOT = {
					is_in_faction_with = ENG
				}
			
				has_capitulated = no
				
			}	
			OR = {
				GER = {
					controls_state = 455
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 455
				}
			}				
		}

		visible = {
			is_puppet = no
			has_war = yes							
		}

		complete_effect = {
			IRQ = { give_resource_rights = { receiver = GER state = 291 } }
			IRQ = { give_resource_rights = { receiver = GER state = 676 } } 
		}

		ai_will_do = {
			factor = 500
		}
	}

	GER_balkan_access = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
			NOT = {
				GER = { controls_state = 731 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 731
				}
				GER = { controls_state = 104 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 104
				}				
			}
		}

		available = {
			OR = { 
				has_war_with = ENG
				NOT = { country_exists = ENG }
			}
			if = {
				limit = {
					GER = {	is_ai = yes }
				}
				date > 1940.5.15	
			}					
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			ROM = { give_military_access = GER }
			HUN = { give_military_access = GER }
			add_to_faction = BUL
		}
	}

	GER_integrate_bulgarian_war_economy = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
			any_state = {
				is_core_of = SOV 
				NOT = {
					is_controlled_by = BUL
				}
			}
			AND = {
				BUL = {
					is_in_faction_with = ROOT
					is_free_or_subject_of_root = yes
					has_full_control_of_state = 48
					has_full_control_of_state = 806
					has_full_control_of_state = 212
					has_full_control_of_state = 211
				}
			}
			FRA = { has_capitulated = yes }
			has_war = yes
			GRE = {
				has_capitulated = yes
			}
			

		}

		ai_will_do = {
			factor = 0

			modifier = {
				add = 100
				BUL = { is_ai = yes }
			}
		}

		complete_effect = {
			if = {
				limit = {
					has_dlc = "Death or Dishonor" 
					BUL = {
						is_in_faction_with = GER
					}
					is_subject = no
				}
				GER = {
					set_autonomy = { target = BUL autonomy_state = autonomy_satellite }
				}
			}
			BUL = {
				48 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			GER = {
				56 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}			
		}
	}
	GER_operation_marita = {
		icon = ger_reichskommissariats
		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
			NOT = {
				GER = { controls_state = 731 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 731
				}				
			}
			NOT = {
				GER = { controls_state = 104 }
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 104
				}				
			}
		}

		available = {
			OR = {
				GER = { is_in_faction_with = BUL }	
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 48
				}
			}
			GER = { is_in_faction_with = HUN }			
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				NOR = { has_capitulated = no }
				FRA = { has_capitulated = no }
			}
		}

		complete_effect = {
			
			
			YUG = { 
				add_to_war = { 
					targeted_alliance = ENG
					enemy = GER 
				}
				
			}
			GRE = { 
				add_to_war = { 
					targeted_alliance = ENG
					enemy = GER 
				}
			}
			ENG = {
				add_to_faction = YUG
				add_to_faction = GRE
			}			
		}
	}			

	GER_integrate_war_economies = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		cost = 25 

		allowed = {
		   tag = GER
		}
		visible = {
			has_war = yes
		}

		available = {
			any_state = {
				is_core_of = SOV 
				NOT = {
					is_controlled_by = ROM
				}
			}
			HUN = {
				has_full_control_of_state = 155
				has_full_control_of_state = 808
				has_full_control_of_state = 43
				has_full_control_of_state = 807
				has_full_control_of_state = 154	
			}
			ROM = {
				has_full_control_of_state = 46
				has_full_control_of_state = 79
			}
			OR = {
				HUN = {
					is_in_faction_with = ROOT
					is_free_or_subject_of_root = yes
				}
				ROM = {
					is_in_faction_with = ROOT
					is_free_or_subject_of_root = yes
				}
			}
			has_war = yes
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			hidden_effect = {
				complete_national_focus = GER_integrate_war_economies
				if = {
				limit = { HUN = { has_completed_focus = HUN_operation_panzerfaust }
					}
				}
				else = {
					HUN = { complete_national_focus = HUN_operation_panzerfaust }
				}
			}
			53 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			52 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = fuel_silo
					level = 2
					instant_build = yes
				}
			}
			HUN = {
				add_stability = -0.2
				155 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				154 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			ROM = {
				add_stability = -0.2
				81 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				82 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
				
			if = {
				limit = {
					ROM = {
						is_in_faction_with = GER
						is_free_or_subject_of_root = yes
					}
				}
				ROM = {
					country_event = { id = wtt_germany.7 days = 1 }
				}
			}
			if = {
				limit = {
					has_dlc = "Death or Dishonor" 
					HUN = {
						is_in_faction_with = GER
						is_subject = no
					}
					is_subject = no

					GER = { is_ai = no }
				}
				GER = {
					set_autonomy = { target = HUN autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					has_dlc = "Death or Dishonor" 
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no

					GER = { is_ai = no }
				}
				GER = {
					set_autonomy = { target = ROM autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					has_dlc = "Together for Victory"
					NOT = { has_dlc = "Death or Dishonor" } 
					HUN = {
						is_in_faction_with = GER
					}
					is_subject = no

					GER = { is_ai = no }
				}
				GER = {
					set_autonomy = { target = HUN autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					has_dlc = "Together for Victory" 
					NOT = { has_dlc = "Death or Dishonor" }
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no

					GER = { is_ai = no }
				}
				GER = {
					set_autonomy = { target = ROM autonomy_state = autonomy_satellite }
				}
			}
			if = {
				limit = { 
					NOT = { has_dlc = "Together for Victory" }
					NOT = { has_dlc = "Death or Dishonor" }
					HUN = {
						is_in_faction_with = GER
					}
					is_subject = no

					GER = { is_ai = no }
				}
				puppet = HUN
			}
			if = {
				limit = { 
					NOT = { has_dlc = "Together for Victory" }
					NOT = { has_dlc = "Death or Dishonor" }
					ROM = {
						is_in_faction_with = GER
					}
					is_subject = no
					
					GER = { is_ai = no }
				}
				puppet = ROM
			}
		}	
			
	}
		
	GER_romanian_oil = {

		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}
		
		fire_only_once = yes
		
		available = {
			ROM = { is_in_faction_with = ROOT }
			ROM = { is_subject_of = ROOT }
		}
		
		visible = {
			has_war = yes
		}
		cost = 50

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			hidden_effect = {
				complete_national_focus = GER_romanian_oil
			}
			ROM = {
				give_resource_rights = { receiver = GER state = 46 }
			}
		}
	}

	GER_secure_spain = {

		icon = ger_reichskommissariats

		fire_only_once = yes

		allowed = {
		   tag = GER
		}
		available = {
			date > 1941.1.1
			SPR = { has_civil_war = no }
			SPR = { NOT = { has_government = fascism } }
			has_war_with = SOV
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		visible = {
			SPR = { has_civil_war = no }
			SPR = { NOT = { has_government = fascism }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
		GER = {
				create_wargoal = {
				type = take_state
				target = SPR
				generator = { 41 }
				}
			}
			if = { limit = { NOT = { SOV = { has_government = fascism } }
			}
				SOV = {
					 add_opinion_modifier = { target = GER modifier = large_decrease }
				}
			}
			if = { limit = { NOT = { POR = { has_government = fascism } }
			}
				POR = {
					 add_opinion_modifier = { target = GER modifier = large_decrease }
				}
			}
		}
	}

	GER_befriend_nationalist_spain = {

		icon = ger_reichskommissariats
		
		fire_only_once = yes
		
		allowed = {
		   tag = GER
		}
		available = {
			date > 1941.1.1
			SPR = { has_civil_war = no }
			SPR = { num_of_factories > 180 }
			any_other_country = {
				original_tag = SPR
				has_government = fascism
				NOT = { has_war_with = GER }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		visible = {
			SPR = { has_civil_war = no }
			any_other_country = {
				original_tag = SPR
				has_government = fascism
				NOT = { has_war_with = GER }
			}
			FRA = {
				OR = {
					NOT = { country_exists = THIS }
					has_capitulated = yes
					has_government = fascism
				}
			}
		}

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			random_country = {
				limit = {
					original_tag = SPR
					has_government = fascism
				}	
			country_event = { id = germany.301 days = 1 }
			}
		}
	}
}

GER_endsieg_category = {

	GER_arrdenes_counter_offensive_decision = {
	
		allowed = {
		   tag = GER
		}

		visible = {
			has_war_with = SOV
			date > 1942.03.01			
		}

		available = {
			has_war_with = SOV
			OR = {
				SOV = {
					surrender_progress < 0.35
				}
				date > 1943.1.1
			}
			# allied advance check
			any_other_country = {
				is_in_faction_with = USA
				controls_state = 6
			}			
			OR = {
				USA = { controls_state = 785 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 785
				}
				USA = { controls_state = 29 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 29
				}
				USA = { controls_state = 15 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 15
				}				
			}
			OR = {
				USA = { controls_state = 34 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 34
				}
				USA = { controls_state = 18 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 18
				}				
			}
			OR = {
				USA = { controls_state = 35 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 35
				}
				USA = { controls_state = 7 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 7
				}				
			}
			OR = {
				USA = { controls_state = 15 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 15
				}
				USA = { controls_state = 16 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 16
				}
				USA = { controls_state = 14 }
				any_other_country = {
					is_in_faction_with = USA
					controls_state = 14
				}				
			}			
		}

		icon = generic_scorched_earth

		cost = 0

		ai_will_do = {
			factor = 100
		}	

		fire_only_once = yes

		complete_effect = {
			if = {
				limit = {
					GER = {
						has_completed_focus = GER_a_storm_of_steel	
					}	
				}
				hidden_effect = {
   					division_template = {
			 			name = "Arrdenes Counter Offensive Heavy Tank Division"
			  			priority = 2
	  
				 		regiments = {
							heavy_armor = { x = 0 y = 0 }
							heavy_armor = { x = 0 y = 1 }
							heavy_armor = { x = 0 y = 2 }
							heavy_armor = { x = 0 y = 3 }
					  
							heavy_armor = { x = 1 y = 0 }
							heavy_armor = { x = 1 y = 1 }
							heavy_armor = { x = 1 y = 2 }
							heavy_armor = { x = 1 y = 3 }
					  
							heavy_armor = { x = 2 y = 0 }
							heavy_armor = { x = 2 y = 1 }
							heavy_armor = { x = 2 y = 2 }
							
							mechanized = { x = 3 y = 0 }
							mechanized = { x = 3 y = 1 }
							mechanized = { x = 3 y = 2 }
							mechanized = { x = 3 y = 3 }
						}
				  		support = {
							DIV_HQ = { x = 0 y = 0 }
							recon = { x = 0 y = 1 }
							engineer = { x = 0 y = 2 }
							anti_air_company = { x = 0 y = 3 }
							maintenance_company = { x = 1 y = 0 }
							logistics_company_mot = { x = 1 y = 1 }
				  		}
					}
					random_owned_controlled_state = {
						limit = { ROOT = { has_full_control_of_state = PREV } }
						prioritize = { 55 }
						create_unit = {
							division = "name = \"Save the Reich!\" division_template = \"Arrdenes Counter Offensive Heavy Tank Division\" start_experience_factor = 0.5 start_equipment_factor = 1" 
							owner = GER
						} 
						create_unit = {
							division = "name = \"Save the Reich!\" division_template = \"Arrdenes Counter Offensive Heavy Tank Division\" start_experience_factor = 0.5 start_equipment_factor = 1" 
							owner = GER
						} 
					}
				} 
			}
			if = {
				limit = { 
					GER = {
						OR = {
							has_completed_focus = GER_achtung_panzer
							has_completed_focus = GER_infanterie_greift_an	
						}
					}
				}
				hidden_effect = {
   					division_template = {
			 			name = "Arrdenes Counter Offensive Medium Tank Division"
			  			priority = 2
	  
				 		regiments = {
							medium_armor = { x = 0 y = 0 }
							medium_armor = { x = 0 y = 1 }
							medium_armor = { x = 0 y = 2 }
							medium_armor = { x = 0 y = 3 }
					  
							medium_armor = { x = 1 y = 0 }
							medium_armor = { x = 1 y = 1 }
							medium_armor = { x = 1 y = 2 }
							medium_armor = { x = 1 y = 3 }
					  
							medium_armor = { x = 2 y = 0 }
							medium_armor = { x = 2 y = 1 }
							medium_armor = { x = 2 y = 2 }
							
							mechanized = { x = 3 y = 0 }
							mechanized = { x = 3 y = 1 }
							mechanized = { x = 3 y = 2 }
							mechanized = { x = 3 y = 3 }
						}
				  		support = {
							DIV_HQ = { x = 0 y = 0 }
							recon = { x = 0 y = 1 }
							engineer = { x = 0 y = 2 }
							anti_air_company = { x = 0 y = 3 }
							maintenance_company = { x = 1 y = 0 }
							logistics_company_mot = { x = 1 y = 1 }
				  		}
					}
					random_owned_controlled_state = {
						limit = { ROOT = { has_full_control_of_state = PREV } }
						prioritize = { 55 }
						create_unit = {
							division = "name = \"Save the Reich!\" division_template = \"Arrdenes Counter Offensive Medium Tank Division\" start_experience_factor = 0.5 start_equipment_factor = 1" 
							owner = GER
						} 
						create_unit = {
							division = "name = \"Save the Reich!\" division_template = \"Arrdenes Counter Offensive Medium Tank Division\" start_experience_factor = 0.5 start_equipment_factor = 1" 
							owner = GER
						}
						create_unit = {
							division = "name = \"Save the Reich!\" division_template = \"Arrdenes Counter Offensive Medium Tank Division\" start_experience_factor = 0.5 start_equipment_factor = 1" 
							owner = GER
						} 
					}
				} 
			}		
			add_timed_idea = {
				idea = GER_arden_counter_offensive
				days = 30
			}
			BUL = {
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}	
			}
			ROM = {
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}
			}	
			HUN = {	
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}
			}	
			EFR = {	
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}
			}
			SLO = {	
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}
			}	
			SPR = {	
				add_timed_idea = {
					idea = GER_arden_counter_offensive
					days = 30
				}
			}
			hidden_effect = {
				news_event = { id = news.492 hours = 6 }
				
				every_country = {limit = { check_variable= { speeches_enabled > 0}  }
					scoped_sound_effect = "sp_ger_counter"
				}
				
			}			
		}
	}

	GER_volksturm_decision = {
		icon = generic_scorched_earth
		
		fire_only_once = no
		is_good = yes

		available = {
			SOV = {
				has_capitulated = yes
			}
		
		}
		visible = {
			has_completed_focus = GER_volksturm
		}
		activation = {
			has_completed_focus = GER_volksturm
		}

		days_mission_timeout = 35

		days_re_enable = 2

		timeout_effect = { 
			random_core_state = {
				limit = { ROOT = { has_full_control_of_state = PREV } }
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}	
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}
				create_unit = {
					division = "name = \"\" division_template = \"Volksturm Division\" start_experience_factor = 0.0 start_equipment_factor = 1" 
					owner = GER
				}			
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_lithuania = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			OR = {
				controls_state = 188
				controls_state = 189
				controls_state = 11
			}
		}
		#####highlight_state_targetsvvvvv = { state = 11 }	
		days_remove = 30 

		remove_effect = {
			if = {
				limit = {
					controls_state = 11
				}
				11 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
			if = {
				limit = {
					controls_state = 189
				}
				189 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
			if = {
				limit = {
					controls_state = 188
				}
				188 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_poland = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 10
		}
		#####highlight_state_targetsvvvvv = { state = 10 }	

		days_remove = 30 

		remove_effect = {

			every_state = {
				limit = {
					is_core_of = POL
					is_controlled_by = GER
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_konigsberg = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 763
		}
		#####highlight_state_targetsvvvvv = { state = 763 }	
		days_remove = 30 

		remove_effect = {
			if = {
				limit = {
					controls_state = 763
				}
				763 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
			if = {
				limit = {
					controls_state = 5
				}
				5 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_france = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 16
		}
		#####highlight_state_targets = { state = 16 }	
		days_remove = 60 

		remove_effect = {

			every_state = {
				limit = {
					is_core_of = FRA
					is_controlled_by = GER
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_belgium = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 6
		}
		#####highlight_state_targetsvvvvv = { state = 6 }	
		days_remove = 30 

		remove_effect = {

			every_state = {
				limit = {
					OR = {
						is_core_of = BEL
						is_core_of = LUX 
					}
					is_controlled_by = GER
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	GER_scorched_earth_netherlands = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 6
		}
		#####highlight_state_targetsvvvvv = { state = 7 }	
		days_remove = 30 

		remove_effect = {

			every_state = {
				limit = {
					is_core_of = HOL
					is_controlled_by = GER
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_the_ruhr = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 64
		}
		####highlight_state_targetsvvvv = { state = 51 }	
		days_remove = 30 

		remove_effect = {
			if = {
				limit = {
					controls_state = 51
				}
				51 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
			if = {
				limit = {
					controls_state = 42
				}
				42 = {
					damage_building = {
						type = rail_way
						damage = 5
					}
					damage_building = {
						type = supply_node
						damage = 1
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_slovakia = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
		}
		#####highlight_state_targetsvvvv = { state = 70 }	
		days_remove = 30 

		remove_effect = {
			every_state = {
				limit = {
					is_core_of = SLO
					or = {
						is_controlled_by = SLO
						is_controlled_by = GER 
					}
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_CZE = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			OR = {
				GER = {
					controls_state = 9 
				}
				CZE = {
					controls_state = 9
				}
			}
		}
		######highlight_state_targetsvvvvv = { state = 9 }	
		days_remove = 30 

		remove_effect = {
			every_state = {
				limit = {
					is_core_of = CZE
					or = {
						is_controlled_by = CZE
						is_controlled_by = GER 
					}
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	GER_scorched_earth_austria = {

		icon = generic_scorched_earth

		available = {
			has_war = yes
			has_completed_focus = GER_implement_scorched_earth_tactics
		}

		cost = 10
		
		fire_only_once = yes
		
		visible = {
			has_war = yes
			controls_state = 4 
		}
		#####highlight_state_targetsvvvvv = { state = 4 }	
		days_remove = 30 

		remove_effect = {
			every_state = {
				limit = {
					is_core_of = AUS
					is_controlled_by = GER 
				}
				damage_building = {
					type = rail_way
					damage = 5
				}
				damage_building = {
					type = supply_node
					damage = 1
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
}

#Category only allowed for GER
GER_military_buildup = {

	GER_plan_z = {

		icon = generic_naval

		available = {
			has_tech = improved_ship_hull_heavy
			OR = {
				AND = {
					has_navy_size = {
						archetype = ship_hull_heavy
						size > 7
					}
					has_navy_size = {
						archetype = ship_hull_carrier
						size > 1
					}
				}
				has_navy_size = {
					archetype = ship_hull_heavy
					size > 9
				}	
			}	
			OR = {
				has_navy_size = {
					archetype = ship_hull_cruiser
					size > 29
				}
				AND = { 
					has_navy_size = {
						archetype = ship_hull_light
						size > 19
					}
				}
			}
		}
								
 		days_remove = 1800

		days_mission_timeout = 1800
		is_good = no
		fire_only_once = yes

		activation = {
			has_completed_focus = GER_naval_expansion
		}

		complete_effect = {
			custom_effect_tooltip = GER_bismarck_and_tirpitz_3tt
			create_equipment_variant = {
				name = "Bismarck Class"
				type = ship_hull_heavy_3
				name_group = GER_BB_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_3
					fixed_ship_anti_air_slot = ship_anti_air_2
					fixed_ship_fire_control_system_slot = ship_fire_control_system_1
					fixed_ship_radar_slot = ship_radar_2
					fixed_ship_engine_slot = heavy_ship_engine_3
					fixed_ship_secondaries_slot = ship_secondaries_2
					fixed_ship_armor_slot = ship_armor_bb_3
					front_1_custom_slot = ship_heavy_battery_3
					mid_1_custom_slot = ship_heavy_battery_3
					mid_2_custom_slot = ship_anti_air_2
					mid_3_custom_slot = ship_anti_air_2
					rear_1_custom_slot = ship_heavy_battery_3
				}
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER" 
					version_name = "Bismarck Class"
				}
				name = "Class-H" 
				requested_factories = 20
				progress = 0.9
				amount = 1
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER" 
					version_name = "Bismarck Class"
				}
				name = "Class-H" 
				requested_factories = 20
				progress = 0.90
				amount = 1
			}
			add_war_support = 0.05
			navy_experience = 150
			add_stability = 0.2
		}	
	}
	GER_lay_down_bismarck_and_tirpitz = {

		icon = generic_naval

		available = {
			
		}

		cost = 0 

		visible = {
			has_completed_focus = GER_battleship_focus 
		}

		modifier = {
			industrial_capacity_dockyard = 0.1
		}

		days_remove = 185
		fire_only_once = yes

		activation = {
			has_completed_focus = GER_naval_expansion
		}

		complete_effect = {
			custom_effect_tooltip = GER_bismarck_and_tirpitz_tt_2
			create_equipment_variant = {
				name = "Bismarck Class"
				type = ship_hull_heavy_3
				name_group = GER_BB_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_3
					fixed_ship_anti_air_slot = ship_anti_air_2
					fixed_ship_fire_control_system_slot = ship_fire_control_system_1
					fixed_ship_radar_slot = ship_radar_2
					fixed_ship_engine_slot = heavy_ship_engine_3
					fixed_ship_secondaries_slot = ship_secondaries_2
					fixed_ship_armor_slot = ship_armor_bb_3
					front_1_custom_slot = ship_heavy_battery_3
					mid_1_custom_slot = ship_heavy_battery_3
					mid_2_custom_slot = ship_anti_air_2
					mid_3_custom_slot = ship_anti_air_2
					rear_1_custom_slot = ship_heavy_battery_3
				}
			}
			create_equipment_variant = {
				name = "Graf Zeppelin Class"
				type = ship_hull_carrier_1
				name_group = GER_CV_HISTORICAL
				parent_version = 0
				modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = carrier_ship_engine_2
				fixed_ship_secondaries_slot = dp_ship_secondaries_2
				front_1_custom_slot = ship_deck_space
			}
		}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER" 
					version_name = "Bismarck Class"
				}
				name = "Bismarck" 
				requested_factories = 20
				progress = 0.75
				amount = 1
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER" 
					version_name = "Bismarck Class"
				}
				name = "Tirpitz" 
				requested_factories = 20
				progress = 0.75
				amount = 1
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_carrier_1
					creator = "GER" 
					version_name = "Graf Zeppelin Class"
				}
				name = "Graf Zeppelin" 
				requested_factories = 20
				progress = 0.50
				amount = 1
			}
		}	
	}
	GER_four_year_plan = { ### Don't build civs reeee 

		icon = generic_construction

		available = {
			synthetic_refinery > 9
			synthetic_rubber_refinery > 12

			has_deployed_air_force_size = {
				size > 1269
				type = fighter
			}
			has_deployed_air_force_size = {
				size > 529
				type = cas
			}
			has_deployed_air_force_size = {
				size > 449
				type = tactical_bomber
			}
		}

		days_mission_timeout = 1460
		fire_only_once = yes
		is_good = no

		cancel_trigger = {
			hidden_trigger = {
				has_war = yes
			}
		}

		activation = {
			has_completed_focus = GER_four_year_plan
		}

		visible = {
			has_completed_focus = GER_four_year_plan
		}

		timeout_effect = {
			add_stability = -0.2
			add_political_power = -150
		}

		complete_effect = {
			add_tech_bonus = {
				category = all_air 
				uses = 1 
				bonus = 1 
			}
			add_offsite_building = { type = arms_factory level = 10 }
			add_stability = 0.2
			add_political_power = 200
		}	
	}
	GER_four_year_plan_schacht = { ### Don't build civs reeee 

		icon = generic_construction

		available = {

			synthetic_refinery > 9
			synthetic_rubber_refinery > 12

			has_deployed_air_force_size = {
				size > 1269
				type = fighter
			}
			has_deployed_air_force_size = {
				size > 369
				type = cas
			}
			has_deployed_air_force_size = {
				size > 449
				type = tactical_bomber
			}
		}

		days_mission_timeout = 1460
		fire_only_once = yes
		is_good = no

		cancel_trigger = {
			hidden_trigger = {
				has_war = yes
			}
		}

		activation = {
			has_completed_focus = GER_continue_the_new_plan
		}

		visible = {
			has_completed_focus = GER_continue_the_new_plan
		}

		timeout_effect = {
			add_stability = -0.2
			add_political_power = -150
		}

		complete_effect = {
			add_tech_bonus = {
				category = industry 
				uses = 1 
				bonus = 1 
			}
			add_offsite_building = { type = industrial_complex level = 10 }
			add_stability = 0.2
			add_political_power = 200
		}	
	}

	GER_mefo_bills_payments_due = { ### moved away from gorings plan to be more consistent

		icon = generic_construction

		available = {
			has_war = yes
		}

		days_mission_timeout = 60
		fire_only_once = yes
		is_good = no

		cancel_trigger = {
			hidden_trigger = {
				has_war = yes
			}
		}

		activation = {
			date > 1940.1.1
			has_war = no
		}

		visible = {

		}

		timeout_effect = {
			add_stability = -0.2
			add_political_power = -150
			GER_remove_mefo_bills = yes
			add_timed_idea = { idea = GER_mefo_bills_ended days = 180 }
		}

		complete_effect = {
		}	
	}	
}

GER_economy_of_plunder_category = {
	GER_economy_of_plunder_debug11111111111112 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
		}
		activation = {
		}
		
		complete_effect = {
			64 = {
				damage_building = {
					type = arms_factory
					damage = 15
				}
				damage_building = {
					type = industrial_complex
					damage = 1
				}
			}
			add_to_variable = {
				var = GER_num_arbeitseinsatz
				value = 100000 
			}

		}		
	}
	GER_economy_of_plunder_debug1111111111111 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
		}
		activation = {
		}
		
		complete_effect = {
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = BUL
						tag = ROM
						tag = HUN
						tag = EFR
						tag = SLO
						tag = SPR
					}
				}
				fall_blau_get_summer_offensive = yes 
			}
		}		
	}
	GER_economy_of_plunder_debug11111111111111111 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
		}
		activation = {
		}
		
		complete_effect = {
			GERcleareconvariables = yes
		}		
	}
	GER_economy_of_plunder_debug22222222222222222222222 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
		}
		activation = {
		}
		
		complete_effect = {
			set_variable = { var = hun_exhaustion value = 0 }
		}		
	}
	GER_economy_of_plunder_debug3 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {
		}
		activation = {
		}
		
		complete_effect = {
			if = {
				limit = {
					has_country_flag = GER_sweden_info_window_open_flag
				}
				add_political_power = 100
			}
		}		
	}
	GER_economy_of_plunder_debug4 = {
		icon = ger_reichskommissariats

		allowed = {
		   tag = GER
		}	
		available = {
		}
		visible = {


		}
		activation = {
		}
		
		complete_effect = {
			if = {
				limit = {
					has_country_flag = GER_ukraine_info_window_open_flag
				}
				add_political_power = 100
			}
		}		
	}
}
