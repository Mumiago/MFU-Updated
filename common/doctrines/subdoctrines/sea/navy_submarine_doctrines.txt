wolfpacks = {
    track = submarines_convoy_raiding
    name = SUBDOCTRINE_SUBMARINE_WOLFPACKS
    description = "With our submarines organized into packs the coordination between them is greatly improved. Once an enemy is located our submarine lies in wait until the rest of the pack arrives, attacking only when the odds are overwhelmingly in our favor."
    icon = GFX_doctrine_wolfpacks_medium

    xp_cost = 100
    xp_type = navy

 

    # EFFECTS
	naval_retreat_speed_after_initial_combat = 0.1
	submarine = {
		max_organisation = 10
	}

    rewards = {
		predictive_expertise = {
			submarine = {
               max_organisation = 15
               surface_detection = 0.05
               convoy_raiding_coordination = 0.05
			}
		}
		pack_search_patterns = {
			submarine = {
				surface_detection = 0.15
				convoy_raiding_coordination = 0.20
			}
		}
		improvisation = {
			submarine = {
				max_organisation = 10
			}
		}
        rough_weather_procedure = {
            navy_submarine_attack_factor = 0.1
			equipment_bonus = {
                ship_hull_submarine = {
				    naval_weather_penalty_factor = -0.15
		        }
            }
		}
		wolfpack_coordination = {

			submarine = {
            max_organisation = 25
				convoy_raiding_coordination = 0.10
			}
		}
    }
}
undersea_blockade_fleet_in_being = {
    track = submarines_fleet_in_being
    name = "Undersea Blockade"
    description = "Submarines are the perfect tool for cutting of the enemy's inflow of important raw materials. We will cripple the enemy's production and win by starving them out."
    icon = GFX_undersea_blockade_medium

    xp_cost = 100
    xp_type = navy

    available = {
        always = yes
    }

    submarine = {
				convoy_raiding_coordination = 0.1
	}


    rewards = {
		convoy_interdiction = {
            submarine = {
               max_organisation = 20
               surface_detection = 0.15
            }
		}
		surface_search_cordination = {
			submarine = {
				surface_detection = 0.15
				convoy_raiding_coordination = 0.05
			}
		}
		torpedo_expertise = {
            naval_torpedo_reveal_chance_factor = -0.15
		}
        rough_weather_procedure = {
			equipment_bonus = {
                ship_hull_submarine = {
				    naval_weather_penalty_factor = -0.15
		        }
            }
		}
		submarine_offensive = {
			submarine = {
				surface_detection = 0.15
				convoy_raiding_coordination = 0.10
			}
		}
    }
}
undersea_blockade_base_strike = {
    track = submarines_base_strike
    name = "Undersea Blockade"
    description = "Submarines are the perfect tool for cutting of the enemy's inflow of important raw materials. We will cripple the enemy's production and win by starving them out."
    icon = GFX_doctrine_unrestricted_submarine_warfare_medium

    xp_cost = 100
    xp_type = navy

    available = {
        always = yes
    }

    # EFFECTS


    rewards = {
		convoy_interdiction = {
            submarine = {
               max_organisation = 20
               surface_detection = 0.15
            }
		}
		surface_search_cordination = {
			submarine = {
				surface_detection = 0.15
				convoy_raiding_coordination = 0.05
			}
		}
		torpedo_expertise = {
            naval_torpedo_reveal_chance_factor = -0.15
		}
        rough_weather_procedure = {
			equipment_bonus = {
                ship_hull_submarine = {
				    naval_weather_penalty_factor = -0.15
		        }
            }
		}
		submarine_offensive = {
			submarine = {
				surface_detection = 0.15
				convoy_raiding_coordination = 0.10
			}
		}
    }
}
submarine_fleet_operations = {
    track = submarines_fleet_in_being
    name = SUBDOCTRINE_SUBMARINE_FLEET_OPERATIONS
    description = SUBDOCTRINE_SUBMARINE_FLEET_OPERATIONS_DESC
    icon = GFX_doctrine_submarine_operations_medium

    xp_cost = 100
    xp_type = navy


    # EFFECTS
	naval_torpedo_screen_penetration_factor = 0.05

    rewards = {
		long_range_patrol_schedule = {
			submarine = {
				surface_detection = 0.30
				naval_range = 0.1 #TODO: does this work?
			}
		}
		sustained_operations = {
			submarine = {
				max_organisation = 15
			}
		}
		ambush_tactics = {
			navy_submarine_attack_factor = 0.10
		}
		hardened_crews = {
			submarine = {
				max_strength = 0.1
			}
		}
		predictive_search_patterns = {
			submarine = {
				surface_detection = 0.10
				convoy_raiding_coordination = 0.20
			}
		}
    }
}

capital_hunters = {
	track = submarines_base_strike
    name = SUBDOCTRINE_SUBMARINE_CAPITAL_HUNTERS
    description = SUBDOCTRINE_SUBMARINE_CAPITAL_HUNTERS_DESC
    icon = GFX_doctrine_unrestricted_submarine_warfare_medium

    xp_cost = 100
    xp_type = navy


    naval_torpedo_reveal_chance_factor = -0.1

    rewards = {
    	fire_protocol_drills = {
    		submarine = {
    			naval_torpedo_hit_chance_factor = 0.15
    		}
    	}
    	battle_line_priority = {
    		naval_torpedo_screen_penetration_factor = 0.1
    	}
    	quick_reload_procedures = {
    		submarine = {
    			torpedo_attack = 0.1
    		}
    	}
    	battleship_chase = {
    		submarine = {
    			fuel_consumption = -0.1
    			naval_range = 0.1
    		}

    	}
    	escape_when_empty = {
    		submarine = {
    			sub_visibility = -0.05
    			naval_speed = 0.1
    		}
    		sub_retreat_speed = 0.2

    	}
    }
}

submarine_coastal_defense = {
	track = submarines_fleet_in_being
    name = SUBDOCTRINE_SUBMARINE_COASTAL_DEFENSE
    description = SUBDOCTRINE_SUBMARINE_COASTAL_DEFENSE_DESC
    icon = GFX_doctrine_undersea_blockade_medium

    xp_cost = 100
    xp_type = navy

    available = {
        is_special_project_completed = sp:sp_naval_midget_submarine
    }

    submarine = {
        supply_consumption = -0.02
    }

    rewards = {

    	optimized_compartments = {
            equipment_bonus = {
                ship_hull_midget_submarine = {
                    reliability = 0.2
                    instant = yes
                }
            }
    	}
    	patrol_vigilance = {
    		submarine = {
    			max_organisation = 20
    			surface_detection = 0.2
    		}
    	}
    	maneuever_fire = {
            equipment_bonus = {
                ship_hull_midget_submarine = {
                    torpedo_attack = 0.1
                    instant = yes
                }
            }
    	}
    	locals_knowledge = {
    		submarine = {
    			sub_visibility = -0.05
    		}
    	}
    	counter_submarine_operations = {
    		submarine = {
    			torpedo_attack = 0.1
    		}
            equipment_bonus = {
                ship_hull_midget_submarine = {
                    sub_visibility = -0.05

                    instant = yes
                }
            }
    	}
    }
}

long_range_submarines = {
    track = submarines_base_strike
    name = SUBDOCTRINE_SUBMARINE_LONG_RANGE_SUBMARINES
    description = SUBDOCTRINE_SUBMARINE_LONG_RANGE_SUBMARINES_DESC
    icon = GFX_doctrine_long_range_submarines_medium

    xp_cost = 100
    xp_type = navy

    available = {
            is_special_project_completed = sp:sp_naval_cruiser_submarine

        }      

    naval_torpedo_hit_chance_factor = 0.1

    rewards = {

        ocean_patrols = {
            equipment_bonus = {
                ship_hull_fleet_submarine = {
                    surface_detection = 0.1
                    instant = yes
                }
                ship_hull_cruiser_submarine = {
                    surface_detection = 0.1
                    instant = yes
                }
            }
            submarine = {
                max_organisation = 10
            }
        }
        improved_dive_protocols = {
            equipment_bonus = {
                ship_hull_fleet_submarine = {
                    surface_visibility = -0.05
                    instant = yes
                }
                ship_hull_cruiser_submarine = {
                    surface_visibility = -0.05
                    instant = yes
                }

            }
        }
        support_the_surface = {
            equipment_bonus = {
                ship_hull_fleet_submarine = {
                    naval_speed = 0.1
                    torpedo_attack = 0.2
                    instant = yes
                }
                ship_hull_cruiser_submarine = {
                    naval_speed = 0.2
                    torpedo_attack = 0.2
                    instant = yes
                }
            }
        }
        stowage_efficiency = {
            equipment_bonus = {
                ship_hull_fleet_submarine = {
                    fuel_consumption = -0.2
                    instant = yes
                }
                ship_hull_cruiser_submarine = {
                    fuel_consumption = -0.2
                    instant = yes
                }
            }
        }

        deep_water_supremacy = {
 			effect = {
                every_navy_leader = {
			        add_trait = {
				        slot = navy_leader
				       trait = blue_water_expert_2
			        }
		        }
            }
        }   

    }



