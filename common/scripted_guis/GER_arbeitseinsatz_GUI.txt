scripted_gui = {
	GER_economy_of_plunder_state_container = {
		context_type = selected_state_context
		window_name = "GER_economy_of_plunder_state_screen"
		parent_window_token = selected_state_view 

		visible = {
			ROOT = {
				original_tag = GER
			}
			ROOT = {
				has_completed_focus = GER_arbeitseinsatz
			}
			THIS = {
				is_controlled_by = ROOT 
                NOT = {
                    is_core_of = GER 
                }
			}
		}

		effects = {
			GER_construction_infrastructure_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -2000 } }
				add_building_construction = { type = infrastructure level = 1 instant_build = yes }
   			   	add_resistance_target = {
                    amount = 2
                    tooltip = GER_increase_resistance_2
		    	}
 			 
			   	set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }
            GER_construction_arms_factory_conversion_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -2000 } }
				set_state_flag  = { flag = GER_arbeitsinsatz_cooldown value = 1 days = 70 }
                remove_building = { type = industrial_complex  level = 1 }
				add_to_variable = { GER_plunder_factory_var = 1 }
   			   	add_resistance_target = {
                    amount = 4
                    tooltip = GER_increase_resistance_4
		    	}
   				
				set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }
			GER_construction_anti_air_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -2200 } }
   			   	add_resistance_target = {
                    amount = 2
                    tooltip = GER_increase_resistance_2
		    	}
				add_building_construction = { type = anti_air_building level = 1 instant_build = yes }
   				set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }

			GER_construction_air_base_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -1800 } }
   			   	add_resistance_target = {
                    amount = 2
                    tooltip = GER_increase_resistance_2
		    	}
				add_building_construction = { type = air_base level = 1 instant_build = yes }
   				set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }
            GER_construction_radar_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -2800 } }
				add_building_construction = { type = radar_station level = 1 instant_build = yes }
   			   	add_resistance_target = {
                    amount = 2
                    tooltip = GER_increase_resistance_2
		    	}
				set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }
            GER_plunder_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = -4000 } }
   			   	add_resistance_target = {
                    amount = 4
                    tooltip = GER_increase_resistance_4
		    	}
			   	set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
            }
            GER_extract_workers_button_click = {
				GER = { add_to_variable = { GER.GER_num_arbeitseinsatz = 1000 } }

  				add_resistance_target = {
                    amount = 4
                    tooltip = GER_increase_resistance_4
		    	}

			   	set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 140 
				}
            }
            GER_bandenbekampfnung_button_click = {
   				set_state_flag  = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
				GER = { add_to_variable = { GER.GER_waffen_ss_soldiers = -500 } }
				add_resistance_target = {
                    amount = -10
                    tooltip = GER_bandenbekampfung_effect_tt
		    	}
            }
            GER_pacification_button_click = {
				set_state_flag = { 
					flag = GER_arbeitsinsatz_cooldown 
					value = 1 
					days = 70 
				}
				GER = { add_to_variable = { GER.GER_waffen_ss_soldiers = -500 } }
				add_compliance = 10 
            }
		}

		triggers = {
			GER_construction_infrastructure_button_click_enabled = {
				check_variable = { GER.GER_num_arbeitseinsatz > 1999 }
			    is_owned_by = GER
			    infrastructure < 10
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
			}
			GER_construction_arms_factory_conversion_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_num_arbeitseinsatz > 1999 }
			    industrial_complex > 0
			    is_owned_by = GER
			}
			GER_construction_anti_air_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_num_arbeitseinsatz > 2199 }
				anti_air_building < 5
			    is_owned_by = GER
            }
			GER_construction_air_base_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_num_arbeitseinsatz > 1799 }
			    air_base < 10
			    is_owned_by = GER
            }
            GER_construction_radar_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_num_arbeitseinsatz > 2799 }
			    radar_station < 5
			    is_owned_by = GER
            }
            GER_plunder_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_num_arbeitseinsatz > 3999 }
			    arms_factory > 0
                industrial_complex > 0 
			    is_owned_by = GER
            }
            GER_extract_workers_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
			    is_owned_by = GER
            }
            GER_bandenbekampfnung_button_click_enabled = {
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				check_variable = { GER.GER_waffen_ss_soldiers > 499 }
			    is_owned_by = GER
            }
            GER_pacification_button_click_enabled = {
				check_variable = { GER.GER_waffen_ss_soldiers > 499 }
				NOT = {
					has_state_flag = GER_arbeitsinsatz_cooldown
				}
				is_owned_by = GER
            }
		}
	}
}

